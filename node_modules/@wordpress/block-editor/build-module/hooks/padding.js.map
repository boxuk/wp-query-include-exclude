{"version":3,"names":["useState","useRef","useEffect","isShallowEqual","BlockPopover","__unstableUseBlockElement","useBlockElement","getComputedCSS","element","property","ownerDocument","defaultView","getComputedStyle","getPropertyValue","PaddingVisualizer","clientId","attributes","forceShow","blockElement","style","setStyle","padding","spacing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","isActive","setIsActive","valueRef","timeoutRef","clearTimer","current","window","clearTimeout","setTimeout","createElement","__unstableCoverTarget","__unstableRefreshSize","__unstablePopoverSlot","shift","className"],"sources":["@wordpress/block-editor/src/hooks/padding.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useRef, useEffect } from '@wordpress/element';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport BlockPopover from '../components/block-popover';\nimport { __unstableUseBlockElement as useBlockElement } from '../components/block-list/use-block-props/use-block-refs';\n\nfunction getComputedCSS( element, property ) {\n\treturn element.ownerDocument.defaultView\n\t\t.getComputedStyle( element )\n\t\t.getPropertyValue( property );\n}\n\nexport function PaddingVisualizer( { clientId, attributes, forceShow } ) {\n\tconst blockElement = useBlockElement( clientId );\n\tconst [ style, setStyle ] = useState();\n\n\tconst padding = attributes?.style?.spacing?.padding;\n\n\tuseEffect( () => {\n\t\tif (\n\t\t\t! blockElement ||\n\t\t\tnull === blockElement.ownerDocument.defaultView\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetStyle( {\n\t\t\tborderTopWidth: getComputedCSS( blockElement, 'padding-top' ),\n\t\t\tborderRightWidth: getComputedCSS( blockElement, 'padding-right' ),\n\t\t\tborderBottomWidth: getComputedCSS( blockElement, 'padding-bottom' ),\n\t\t\tborderLeftWidth: getComputedCSS( blockElement, 'padding-left' ),\n\t\t} );\n\t}, [ blockElement, padding ] );\n\n\tconst [ isActive, setIsActive ] = useState( false );\n\tconst valueRef = useRef( padding );\n\tconst timeoutRef = useRef();\n\n\tconst clearTimer = () => {\n\t\tif ( timeoutRef.current ) {\n\t\t\twindow.clearTimeout( timeoutRef.current );\n\t\t}\n\t};\n\n\tuseEffect( () => {\n\t\tif ( ! isShallowEqual( padding, valueRef.current ) && ! forceShow ) {\n\t\t\tsetIsActive( true );\n\t\t\tvalueRef.current = padding;\n\n\t\t\ttimeoutRef.current = setTimeout( () => {\n\t\t\t\tsetIsActive( false );\n\t\t\t}, 400 );\n\t\t}\n\n\t\treturn () => {\n\t\t\tsetIsActive( false );\n\t\t\tclearTimer();\n\t\t};\n\t}, [ padding, forceShow ] );\n\n\tif ( ! isActive && ! forceShow ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<BlockPopover\n\t\t\tclientId={ clientId }\n\t\t\t__unstableCoverTarget\n\t\t\t__unstableRefreshSize={ padding }\n\t\t\t__unstablePopoverSlot=\"block-toolbar\"\n\t\t\tshift={ false }\n\t\t>\n\t\t\t<div className=\"block-editor__padding-visualizer\" style={ style } />\n\t\t</BlockPopover>\n\t);\n}\n"],"mappings":";AAAA;AACA;AACA;AACA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,oBAAoB;AAChE,OAAOC,cAAc,MAAM,6BAA6B;;AAExD;AACA;AACA;AACA,OAAOC,YAAY,MAAM,6BAA6B;AACtD,SAASC,yBAAyB,IAAIC,eAAe,QAAQ,yDAAyD;AAEtH,SAASC,cAAcA,CAAEC,OAAO,EAAEC,QAAQ,EAAG;EAC5C,OAAOD,OAAO,CAACE,aAAa,CAACC,WAAW,CACtCC,gBAAgB,CAAEJ,OAAQ,CAAC,CAC3BK,gBAAgB,CAAEJ,QAAS,CAAC;AAC/B;AAEA,OAAO,SAASK,iBAAiBA,CAAE;EAAEC,QAAQ;EAAEC,UAAU;EAAEC;AAAU,CAAC,EAAG;EACxE,MAAMC,YAAY,GAAGZ,eAAe,CAAES,QAAS,CAAC;EAChD,MAAM,CAAEI,KAAK,EAAEC,QAAQ,CAAE,GAAGpB,QAAQ,CAAC,CAAC;EAEtC,MAAMqB,OAAO,GAAGL,UAAU,EAAEG,KAAK,EAAEG,OAAO,EAAED,OAAO;EAEnDnB,SAAS,CAAE,MAAM;IAChB,IACC,CAAEgB,YAAY,IACd,IAAI,KAAKA,YAAY,CAACR,aAAa,CAACC,WAAW,EAC9C;MACD;IACD;IAEAS,QAAQ,CAAE;MACTG,cAAc,EAAEhB,cAAc,CAAEW,YAAY,EAAE,aAAc,CAAC;MAC7DM,gBAAgB,EAAEjB,cAAc,CAAEW,YAAY,EAAE,eAAgB,CAAC;MACjEO,iBAAiB,EAAElB,cAAc,CAAEW,YAAY,EAAE,gBAAiB,CAAC;MACnEQ,eAAe,EAAEnB,cAAc,CAAEW,YAAY,EAAE,cAAe;IAC/D,CAAE,CAAC;EACJ,CAAC,EAAE,CAAEA,YAAY,EAAEG,OAAO,CAAG,CAAC;EAE9B,MAAM,CAAEM,QAAQ,EAAEC,WAAW,CAAE,GAAG5B,QAAQ,CAAE,KAAM,CAAC;EACnD,MAAM6B,QAAQ,GAAG5B,MAAM,CAAEoB,OAAQ,CAAC;EAClC,MAAMS,UAAU,GAAG7B,MAAM,CAAC,CAAC;EAE3B,MAAM8B,UAAU,GAAGA,CAAA,KAAM;IACxB,IAAKD,UAAU,CAACE,OAAO,EAAG;MACzBC,MAAM,CAACC,YAAY,CAAEJ,UAAU,CAACE,OAAQ,CAAC;IAC1C;EACD,CAAC;EAED9B,SAAS,CAAE,MAAM;IAChB,IAAK,CAAEC,cAAc,CAAEkB,OAAO,EAAEQ,QAAQ,CAACG,OAAQ,CAAC,IAAI,CAAEf,SAAS,EAAG;MACnEW,WAAW,CAAE,IAAK,CAAC;MACnBC,QAAQ,CAACG,OAAO,GAAGX,OAAO;MAE1BS,UAAU,CAACE,OAAO,GAAGG,UAAU,CAAE,MAAM;QACtCP,WAAW,CAAE,KAAM,CAAC;MACrB,CAAC,EAAE,GAAI,CAAC;IACT;IAEA,OAAO,MAAM;MACZA,WAAW,CAAE,KAAM,CAAC;MACpBG,UAAU,CAAC,CAAC;IACb,CAAC;EACF,CAAC,EAAE,CAAEV,OAAO,EAAEJ,SAAS,CAAG,CAAC;EAE3B,IAAK,CAAEU,QAAQ,IAAI,CAAEV,SAAS,EAAG;IAChC,OAAO,IAAI;EACZ;EAEA,OACCmB,aAAA,CAAChC,YAAY;IACZW,QAAQ,EAAGA,QAAU;IACrBsB,qBAAqB;IACrBC,qBAAqB,EAAGjB,OAAS;IACjCkB,qBAAqB,EAAC,eAAe;IACrCC,KAAK,EAAG;EAAO,GAEfJ,aAAA;IAAKK,SAAS,EAAC,kCAAkC;IAACtB,KAAK,EAAGA;EAAO,CAAE,CACtD,CAAC;AAEjB"}