{"version":3,"names":["useSelect","isUnmodifiedDefaultBlock","useViewportMatch","store","blockEditorStore","unlock","useShouldContextualToolbarShow","isLargeViewport","shouldShowContextualToolbar","canFocusHiddenToolbar","fixedToolbarCanBeFocused","select","__unstableGetEditorMode","isMultiSelecting","isTyping","isBlockInterfaceHidden","getBlock","getSettings","isNavigationMode","getSelectedBlockClientId","getFirstMultiSelectedBlockClientId","isEditMode","hasFixedToolbar","isDistractionFree","selectedBlockId","hasSelectedBlockId","isEmptyDefaultBlock","_shouldShowContextualToolbar","_canFocusHiddenToolbar"],"sources":["@wordpress/block-editor/src/utils/use-should-contextual-toolbar-show.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\nimport { useViewportMatch } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { unlock } from '../lock-unlock';\n\n/**\n * Returns true if the contextual block toolbar should show, or false if it should be hidden.\n *\n * @return {boolean} Whether the block toolbar is hidden.\n */\nexport function useShouldContextualToolbarShow() {\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\n\tconst {\n\t\tshouldShowContextualToolbar,\n\t\tcanFocusHiddenToolbar,\n\t\tfixedToolbarCanBeFocused,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t\tisMultiSelecting,\n\t\t\t\tisTyping,\n\t\t\t\tisBlockInterfaceHidden,\n\t\t\t\tgetBlock,\n\t\t\t\tgetSettings,\n\t\t\t\tisNavigationMode,\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tgetFirstMultiSelectedBlockClientId,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\n\t\t\tconst isEditMode = __unstableGetEditorMode() === 'edit';\n\t\t\tconst hasFixedToolbar = getSettings().hasFixedToolbar;\n\t\t\tconst isDistractionFree = getSettings().isDistractionFree;\n\t\t\tconst selectedBlockId =\n\t\t\t\tgetFirstMultiSelectedBlockClientId() ||\n\t\t\t\tgetSelectedBlockClientId();\n\t\t\tconst hasSelectedBlockId = !! selectedBlockId;\n\t\t\tconst isEmptyDefaultBlock = isUnmodifiedDefaultBlock(\n\t\t\t\tgetBlock( selectedBlockId ) || {}\n\t\t\t);\n\n\t\t\tconst _shouldShowContextualToolbar =\n\t\t\t\tisEditMode &&\n\t\t\t\t! hasFixedToolbar &&\n\t\t\t\t( ! isDistractionFree || isNavigationMode() ) &&\n\t\t\t\tisLargeViewport &&\n\t\t\t\t! isMultiSelecting() &&\n\t\t\t\t! isTyping() &&\n\t\t\t\thasSelectedBlockId &&\n\t\t\t\t! isEmptyDefaultBlock &&\n\t\t\t\t! isBlockInterfaceHidden();\n\n\t\t\tconst _canFocusHiddenToolbar =\n\t\t\t\tisEditMode &&\n\t\t\t\thasSelectedBlockId &&\n\t\t\t\t! _shouldShowContextualToolbar &&\n\t\t\t\t! hasFixedToolbar &&\n\t\t\t\t! isDistractionFree &&\n\t\t\t\t! isEmptyDefaultBlock;\n\n\t\t\treturn {\n\t\t\t\tshouldShowContextualToolbar: _shouldShowContextualToolbar,\n\t\t\t\tcanFocusHiddenToolbar: _canFocusHiddenToolbar,\n\t\t\t\tfixedToolbarCanBeFocused:\n\t\t\t\t\t( hasFixedToolbar || ! isLargeViewport ) && selectedBlockId,\n\t\t\t};\n\t\t},\n\t\t[ isLargeViewport ]\n\t);\n\n\treturn {\n\t\tshouldShowContextualToolbar,\n\t\tcanFocusHiddenToolbar,\n\t\tfixedToolbarCanBeFocused,\n\t};\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,wBAAwB,QAAQ,mBAAmB;AAC5D,SAASC,gBAAgB,QAAQ,oBAAoB;;AAErD;AACA;AACA;AACA,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,UAAU;AACpD,SAASC,MAAM,QAAQ,gBAAgB;;AAEvC;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,8BAA8BA,CAAA,EAAG;EAChD,MAAMC,eAAe,GAAGL,gBAAgB,CAAE,QAAS,CAAC;EAEpD,MAAM;IACLM,2BAA2B;IAC3BC,qBAAqB;IACrBC;EACD,CAAC,GAAGV,SAAS,CACVW,MAAM,IAAM;IACb,MAAM;MACLC,uBAAuB;MACvBC,gBAAgB;MAChBC,QAAQ;MACRC,sBAAsB;MACtBC,QAAQ;MACRC,WAAW;MACXC,gBAAgB;MAChBC,wBAAwB;MACxBC;IACD,CAAC,GAAGf,MAAM,CAAEM,MAAM,CAAEP,gBAAiB,CAAE,CAAC;IAExC,MAAMiB,UAAU,GAAGT,uBAAuB,CAAC,CAAC,KAAK,MAAM;IACvD,MAAMU,eAAe,GAAGL,WAAW,CAAC,CAAC,CAACK,eAAe;IACrD,MAAMC,iBAAiB,GAAGN,WAAW,CAAC,CAAC,CAACM,iBAAiB;IACzD,MAAMC,eAAe,GACpBJ,kCAAkC,CAAC,CAAC,IACpCD,wBAAwB,CAAC,CAAC;IAC3B,MAAMM,kBAAkB,GAAG,CAAC,CAAED,eAAe;IAC7C,MAAME,mBAAmB,GAAGzB,wBAAwB,CACnDe,QAAQ,CAAEQ,eAAgB,CAAC,IAAI,CAAC,CACjC,CAAC;IAED,MAAMG,4BAA4B,GACjCN,UAAU,IACV,CAAEC,eAAe,KACf,CAAEC,iBAAiB,IAAIL,gBAAgB,CAAC,CAAC,CAAE,IAC7CX,eAAe,IACf,CAAEM,gBAAgB,CAAC,CAAC,IACpB,CAAEC,QAAQ,CAAC,CAAC,IACZW,kBAAkB,IAClB,CAAEC,mBAAmB,IACrB,CAAEX,sBAAsB,CAAC,CAAC;IAE3B,MAAMa,sBAAsB,GAC3BP,UAAU,IACVI,kBAAkB,IAClB,CAAEE,4BAA4B,IAC9B,CAAEL,eAAe,IACjB,CAAEC,iBAAiB,IACnB,CAAEG,mBAAmB;IAEtB,OAAO;MACNlB,2BAA2B,EAAEmB,4BAA4B;MACzDlB,qBAAqB,EAAEmB,sBAAsB;MAC7ClB,wBAAwB,EACvB,CAAEY,eAAe,IAAI,CAAEf,eAAe,KAAMiB;IAC9C,CAAC;EACF,CAAC,EACD,CAAEjB,eAAe,CAClB,CAAC;EAED,OAAO;IACNC,2BAA2B;IAC3BC,qBAAqB;IACrBC;EACD,CAAC;AACF"}