{"version":3,"names":["IS_ROOT_TAG","wrap","namespace","ignore","node","updateSelector","selector","includes","trim","startsWith","match","replace","type","selectors","map"],"sources":["@wordpress/block-editor/src/utils/transform-styles/transforms/wrap.js"],"sourcesContent":["/**\n * @constant string IS_ROOT_TAG Regex to check if the selector is a root tag selector.\n */\nconst IS_ROOT_TAG = /^(body|html|:root).*$/;\n\n/**\n * Creates a callback to modify selectors so they only apply within a certain\n * namespace.\n *\n * @param {string}   namespace Namespace to prefix selectors with.\n * @param {string[]} ignore    Selectors to not prefix.\n *\n * @return {(node: Object) => Object} Callback to wrap selectors.\n */\nconst wrap =\n\t( namespace, ignore = [] ) =>\n\t( node ) => {\n\t\t/**\n\t\t * Updates selector if necessary.\n\t\t *\n\t\t * @param {string} selector Selector to modify.\n\t\t *\n\t\t * @return {string} Updated selector.\n\t\t */\n\t\tconst updateSelector = ( selector ) => {\n\t\t\tif ( ignore.includes( selector.trim() ) ) {\n\t\t\t\treturn selector;\n\t\t\t}\n\n\t\t\t// Skip the update when a selector already has a namespace + space (\" \").\n\t\t\tif ( selector.trim().startsWith( `${ namespace } ` ) ) {\n\t\t\t\treturn selector;\n\t\t\t}\n\n\t\t\t// Anything other than a root tag is always prefixed.\n\t\t\t{\n\t\t\t\tif ( ! selector.match( IS_ROOT_TAG ) ) {\n\t\t\t\t\treturn namespace + ' ' + selector;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// HTML and Body elements cannot be contained within our container so lets extract their styles.\n\t\t\treturn selector.replace( /^(body|html|:root)/, namespace );\n\t\t};\n\n\t\tif ( node.type === 'rule' ) {\n\t\t\treturn {\n\t\t\t\t...node,\n\t\t\t\tselectors: node.selectors.map( updateSelector ),\n\t\t\t};\n\t\t}\n\n\t\treturn node;\n\t};\n\nexport default wrap;\n"],"mappings":"AAAA;AACA;AACA;AACA,MAAMA,WAAW,GAAG,uBAAuB;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,IAAI,GACTA,CAAEC,SAAS,EAAEC,MAAM,GAAG,EAAE,KACtBC,IAAI,IAAM;EACX;AACF;AACA;AACA;AACA;AACA;AACA;EACE,MAAMC,cAAc,GAAKC,QAAQ,IAAM;IACtC,IAAKH,MAAM,CAACI,QAAQ,CAAED,QAAQ,CAACE,IAAI,CAAC,CAAE,CAAC,EAAG;MACzC,OAAOF,QAAQ;IAChB;;IAEA;IACA,IAAKA,QAAQ,CAACE,IAAI,CAAC,CAAC,CAACC,UAAU,CAAG,GAAGP,SAAW,GAAG,CAAC,EAAG;MACtD,OAAOI,QAAQ;IAChB;;IAEA;IACA;MACC,IAAK,CAAEA,QAAQ,CAACI,KAAK,CAAEV,WAAY,CAAC,EAAG;QACtC,OAAOE,SAAS,GAAG,GAAG,GAAGI,QAAQ;MAClC;IACD;;IAEA;IACA,OAAOA,QAAQ,CAACK,OAAO,CAAE,oBAAoB,EAAET,SAAU,CAAC;EAC3D,CAAC;EAED,IAAKE,IAAI,CAACQ,IAAI,KAAK,MAAM,EAAG;IAC3B,OAAO;MACN,GAAGR,IAAI;MACPS,SAAS,EAAET,IAAI,CAACS,SAAS,CAACC,GAAG,CAAET,cAAe;IAC/C,CAAC;EACF;EAEA,OAAOD,IAAI;AACZ,CAAC;AAEF,eAAeH,IAAI"}