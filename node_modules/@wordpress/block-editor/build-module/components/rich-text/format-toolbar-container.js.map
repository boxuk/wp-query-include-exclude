{"version":3,"names":["__","Popover","ToolbarGroup","useSelect","isCollapsed","getActiveFormats","useAnchor","store","richTextStore","BlockControls","FormatToolbar","NavigableToolbar","blockEditorStore","InlineSelectionToolbar","editableContentElement","activeFormats","lastFormat","length","lastFormatType","type","settings","select","getFormatType","popoverAnchor","createElement","InlineToolbar","placement","focusOnMount","anchor","className","__unstableSlotName","FormatToolbarContainer","inline","value","hasInlineToolbar","getSettings","group"],"sources":["@wordpress/block-editor/src/components/rich-text/format-toolbar-container.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Popover, ToolbarGroup } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tisCollapsed,\n\tgetActiveFormats,\n\tuseAnchor,\n\tstore as richTextStore,\n} from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport BlockControls from '../block-controls';\nimport FormatToolbar from './format-toolbar';\nimport NavigableToolbar from '../navigable-toolbar';\nimport { store as blockEditorStore } from '../../store';\n\nfunction InlineSelectionToolbar( { editableContentElement, activeFormats } ) {\n\tconst lastFormat = activeFormats[ activeFormats.length - 1 ];\n\tconst lastFormatType = lastFormat?.type;\n\tconst settings = useSelect(\n\t\t( select ) => select( richTextStore ).getFormatType( lastFormatType ),\n\t\t[ lastFormatType ]\n\t);\n\tconst popoverAnchor = useAnchor( {\n\t\teditableContentElement,\n\t\tsettings,\n\t} );\n\n\treturn <InlineToolbar popoverAnchor={ popoverAnchor } />;\n}\n\nfunction InlineToolbar( { popoverAnchor } ) {\n\treturn (\n\t\t<Popover\n\t\t\tplacement=\"top\"\n\t\t\tfocusOnMount={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar\"\n\t\t\t__unstableSlotName=\"block-toolbar\"\n\t\t>\n\t\t\t<NavigableToolbar\n\t\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar-group\"\n\t\t\t\t/* translators: accessibility text for the inline format toolbar */\n\t\t\t\taria-label={ __( 'Format tools' ) }\n\t\t\t>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<FormatToolbar />\n\t\t\t\t</ToolbarGroup>\n\t\t\t</NavigableToolbar>\n\t\t</Popover>\n\t);\n}\n\nconst FormatToolbarContainer = ( {\n\tinline,\n\teditableContentElement,\n\tvalue,\n} ) => {\n\tconst hasInlineToolbar = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings().hasInlineToolbar,\n\t\t[]\n\t);\n\n\tif ( inline ) {\n\t\treturn <InlineToolbar popoverAnchor={ editableContentElement } />;\n\t}\n\n\tif ( hasInlineToolbar ) {\n\t\tconst activeFormats = getActiveFormats( value );\n\n\t\tif ( isCollapsed( value ) && ! activeFormats.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<InlineSelectionToolbar\n\t\t\t\teditableContentElement={ editableContentElement }\n\t\t\t\tactiveFormats={ activeFormats }\n\t\t\t/>\n\t\t);\n\t}\n\n\t// Render regular toolbar.\n\treturn (\n\t\t<BlockControls group=\"inline\">\n\t\t\t<FormatToolbar />\n\t\t</BlockControls>\n\t);\n};\n\nexport default FormatToolbarContainer;\n"],"mappings":";AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,OAAO,EAAEC,YAAY,QAAQ,uBAAuB;AAC7D,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SACCC,WAAW,EACXC,gBAAgB,EAChBC,SAAS,EACTC,KAAK,IAAIC,aAAa,QAChB,sBAAsB;;AAE7B;AACA;AACA;AACA,OAAOC,aAAa,MAAM,mBAAmB;AAC7C,OAAOC,aAAa,MAAM,kBAAkB;AAC5C,OAAOC,gBAAgB,MAAM,sBAAsB;AACnD,SAASJ,KAAK,IAAIK,gBAAgB,QAAQ,aAAa;AAEvD,SAASC,sBAAsBA,CAAE;EAAEC,sBAAsB;EAAEC;AAAc,CAAC,EAAG;EAC5E,MAAMC,UAAU,GAAGD,aAAa,CAAEA,aAAa,CAACE,MAAM,GAAG,CAAC,CAAE;EAC5D,MAAMC,cAAc,GAAGF,UAAU,EAAEG,IAAI;EACvC,MAAMC,QAAQ,GAAGjB,SAAS,CACvBkB,MAAM,IAAMA,MAAM,CAAEb,aAAc,CAAC,CAACc,aAAa,CAAEJ,cAAe,CAAC,EACrE,CAAEA,cAAc,CACjB,CAAC;EACD,MAAMK,aAAa,GAAGjB,SAAS,CAAE;IAChCQ,sBAAsB;IACtBM;EACD,CAAE,CAAC;EAEH,OAAOI,aAAA,CAACC,aAAa;IAACF,aAAa,EAAGA;EAAe,CAAE,CAAC;AACzD;AAEA,SAASE,aAAaA,CAAE;EAAEF;AAAc,CAAC,EAAG;EAC3C,OACCC,aAAA,CAACvB,OAAO;IACPyB,SAAS,EAAC,KAAK;IACfC,YAAY,EAAG,KAAO;IACtBC,MAAM,EAAGL,aAAe;IACxBM,SAAS,EAAC,+CAA+C;IACzDC,kBAAkB,EAAC;EAAe,GAElCN,aAAA,CAACb,gBAAgB;IAChBkB,SAAS,EAAC;IACV;IACA,cAAa7B,EAAE,CAAE,cAAe;EAAG,GAEnCwB,aAAA,CAACtB,YAAY,QACZsB,aAAA,CAACd,aAAa,MAAE,CACH,CACG,CACV,CAAC;AAEZ;AAEA,MAAMqB,sBAAsB,GAAGA,CAAE;EAChCC,MAAM;EACNlB,sBAAsB;EACtBmB;AACD,CAAC,KAAM;EACN,MAAMC,gBAAgB,GAAG/B,SAAS,CAC/BkB,MAAM,IAAMA,MAAM,CAAET,gBAAiB,CAAC,CAACuB,WAAW,CAAC,CAAC,CAACD,gBAAgB,EACvE,EACD,CAAC;EAED,IAAKF,MAAM,EAAG;IACb,OAAOR,aAAA,CAACC,aAAa;MAACF,aAAa,EAAGT;IAAwB,CAAE,CAAC;EAClE;EAEA,IAAKoB,gBAAgB,EAAG;IACvB,MAAMnB,aAAa,GAAGV,gBAAgB,CAAE4B,KAAM,CAAC;IAE/C,IAAK7B,WAAW,CAAE6B,KAAM,CAAC,IAAI,CAAElB,aAAa,CAACE,MAAM,EAAG;MACrD,OAAO,IAAI;IACZ;IAEA,OACCO,aAAA,CAACX,sBAAsB;MACtBC,sBAAsB,EAAGA,sBAAwB;MACjDC,aAAa,EAAGA;IAAe,CAC/B,CAAC;EAEJ;;EAEA;EACA,OACCS,aAAA,CAACf,aAAa;IAAC2B,KAAK,EAAC;EAAQ,GAC5BZ,aAAA,CAACd,aAAa,MAAE,CACF,CAAC;AAElB,CAAC;AAED,eAAeqB,sBAAsB"}