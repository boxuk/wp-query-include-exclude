{"version":3,"names":["useSelect","useLayout","store","blockEditorStore","getLayoutType","EMPTY_ARRAY","DEFAULT_CONTROLS","WIDE_CONTROLS","useAvailableAlignments","controls","includes","wideControlsEnabled","themeSupportsLayout","isBlockBasedTheme","select","getSettings","settings","alignWide","supportsLayout","__unstableIsBlockBasedTheme","layout","layoutType","type","layoutAlignments","getAlignments","alignments","filter","name","alignmentName","length","availableAlignments","enabledControls","control","map","enabledControl"],"sources":["@wordpress/block-editor/src/components/block-alignment-control/use-available-alignments.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useLayout } from '../block-list/layout';\nimport { store as blockEditorStore } from '../../store';\nimport { getLayoutType } from '../../layouts';\n\nconst EMPTY_ARRAY = [];\nconst DEFAULT_CONTROLS = [ 'none', 'left', 'center', 'right', 'wide', 'full' ];\nconst WIDE_CONTROLS = [ 'wide', 'full' ];\n\nexport default function useAvailableAlignments( controls = DEFAULT_CONTROLS ) {\n\t// Always add the `none` option if not exists.\n\tif ( ! controls.includes( 'none' ) ) {\n\t\tcontrols = [ 'none', ...controls ];\n\t}\n\tconst {\n\t\twideControlsEnabled = false,\n\t\tthemeSupportsLayout,\n\t\tisBlockBasedTheme,\n\t} = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\tconst settings = getSettings();\n\t\treturn {\n\t\t\twideControlsEnabled: settings.alignWide,\n\t\t\tthemeSupportsLayout: settings.supportsLayout,\n\t\t\tisBlockBasedTheme: settings.__unstableIsBlockBasedTheme,\n\t\t};\n\t}, [] );\n\tconst layout = useLayout();\n\tconst layoutType = getLayoutType( layout?.type );\n\tconst layoutAlignments = layoutType.getAlignments(\n\t\tlayout,\n\t\tisBlockBasedTheme\n\t);\n\n\tif ( themeSupportsLayout ) {\n\t\tconst alignments = layoutAlignments.filter(\n\t\t\t( { name: alignmentName } ) => controls.includes( alignmentName )\n\t\t);\n\t\t// While we treat `none` as an alignment, we shouldn't return it if no\n\t\t// other alignments exist.\n\t\tif ( alignments.length === 1 && alignments[ 0 ].name === 'none' ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\t\treturn alignments;\n\t}\n\n\t// Starting here, it's the fallback for themes not supporting the layout config.\n\tif ( layoutType.name !== 'default' && layoutType.name !== 'constrained' ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\tconst { alignments: availableAlignments = DEFAULT_CONTROLS } = layout;\n\tconst enabledControls = controls\n\t\t.filter(\n\t\t\t( control ) =>\n\t\t\t\t( layout.alignments || // Ignore the global wideAlignment check if the layout explicitely defines alignments.\n\t\t\t\t\twideControlsEnabled ||\n\t\t\t\t\t! WIDE_CONTROLS.includes( control ) ) &&\n\t\t\t\tavailableAlignments.includes( control )\n\t\t)\n\t\t.map( ( enabledControl ) => ( { name: enabledControl } ) );\n\n\t// While we treat `none` as an alignment, we shouldn't return it if no\n\t// other alignments exist.\n\tif (\n\t\tenabledControls.length === 1 &&\n\t\tenabledControls[ 0 ].name === 'none'\n\t) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\treturn enabledControls;\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,iBAAiB;;AAE3C;AACA;AACA;AACA,SAASC,SAAS,QAAQ,sBAAsB;AAChD,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AACvD,SAASC,aAAa,QAAQ,eAAe;AAE7C,MAAMC,WAAW,GAAG,EAAE;AACtB,MAAMC,gBAAgB,GAAG,CAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,CAAE;AAC9E,MAAMC,aAAa,GAAG,CAAE,MAAM,EAAE,MAAM,CAAE;AAExC,eAAe,SAASC,sBAAsBA,CAAEC,QAAQ,GAAGH,gBAAgB,EAAG;EAC7E;EACA,IAAK,CAAEG,QAAQ,CAACC,QAAQ,CAAE,MAAO,CAAC,EAAG;IACpCD,QAAQ,GAAG,CAAE,MAAM,EAAE,GAAGA,QAAQ,CAAE;EACnC;EACA,MAAM;IACLE,mBAAmB,GAAG,KAAK;IAC3BC,mBAAmB;IACnBC;EACD,CAAC,GAAGb,SAAS,CAAIc,MAAM,IAAM;IAC5B,MAAM;MAAEC;IAAY,CAAC,GAAGD,MAAM,CAAEX,gBAAiB,CAAC;IAClD,MAAMa,QAAQ,GAAGD,WAAW,CAAC,CAAC;IAC9B,OAAO;MACNJ,mBAAmB,EAAEK,QAAQ,CAACC,SAAS;MACvCL,mBAAmB,EAAEI,QAAQ,CAACE,cAAc;MAC5CL,iBAAiB,EAAEG,QAAQ,CAACG;IAC7B,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EACP,MAAMC,MAAM,GAAGnB,SAAS,CAAC,CAAC;EAC1B,MAAMoB,UAAU,GAAGjB,aAAa,CAAEgB,MAAM,EAAEE,IAAK,CAAC;EAChD,MAAMC,gBAAgB,GAAGF,UAAU,CAACG,aAAa,CAChDJ,MAAM,EACNP,iBACD,CAAC;EAED,IAAKD,mBAAmB,EAAG;IAC1B,MAAMa,UAAU,GAAGF,gBAAgB,CAACG,MAAM,CACzC,CAAE;MAAEC,IAAI,EAAEC;IAAc,CAAC,KAAMnB,QAAQ,CAACC,QAAQ,CAAEkB,aAAc,CACjE,CAAC;IACD;IACA;IACA,IAAKH,UAAU,CAACI,MAAM,KAAK,CAAC,IAAIJ,UAAU,CAAE,CAAC,CAAE,CAACE,IAAI,KAAK,MAAM,EAAG;MACjE,OAAOtB,WAAW;IACnB;IACA,OAAOoB,UAAU;EAClB;;EAEA;EACA,IAAKJ,UAAU,CAACM,IAAI,KAAK,SAAS,IAAIN,UAAU,CAACM,IAAI,KAAK,aAAa,EAAG;IACzE,OAAOtB,WAAW;EACnB;EACA,MAAM;IAAEoB,UAAU,EAAEK,mBAAmB,GAAGxB;EAAiB,CAAC,GAAGc,MAAM;EACrE,MAAMW,eAAe,GAAGtB,QAAQ,CAC9BiB,MAAM,CACJM,OAAO,IACR,CAAEZ,MAAM,CAACK,UAAU;EAAI;EACtBd,mBAAmB,IACnB,CAAEJ,aAAa,CAACG,QAAQ,CAAEsB,OAAQ,CAAC,KACpCF,mBAAmB,CAACpB,QAAQ,CAAEsB,OAAQ,CACxC,CAAC,CACAC,GAAG,CAAIC,cAAc,KAAQ;IAAEP,IAAI,EAAEO;EAAe,CAAC,CAAG,CAAC;;EAE3D;EACA;EACA,IACCH,eAAe,CAACF,MAAM,KAAK,CAAC,IAC5BE,eAAe,CAAE,CAAC,CAAE,CAACJ,IAAI,KAAK,MAAM,EACnC;IACD,OAAOtB,WAAW;EACnB;EAEA,OAAO0B,eAAe;AACvB"}