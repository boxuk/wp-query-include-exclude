{"version":3,"names":["classnames","useSelect","useRef","useViewportMatch","getBlockType","hasBlockSupport","isReusableBlock","isTemplatePart","ToolbarGroup","BlockMover","BlockParentSelector","BlockSwitcher","BlockControls","__unstableBlockToolbarLastItem","BlockSettingsMenu","BlockLockToolbar","BlockGroupToolbar","BlockEditVisuallyButton","useShowHoveredOrFocusedGestures","store","blockEditorStore","__unstableBlockNameContext","BlockToolbar","hideDragHandle","blockClientIds","blockType","isValid","isVisual","blockEditingMode","select","getBlockName","getBlockMode","getSelectedBlockClientIds","isBlockValid","getBlockRootClientId","getBlockEditingMode","selectedBlockClientIds","selectedBlockClientId","blockRootClientId","rootClientId","every","id","toolbarWrapperRef","nodeRef","showHoveredOrFocusedGestures","ref","isLargeViewport","length","shouldShowVisualToolbar","isMultiToolbar","isSynced","classes","createElement","className","clientIds","clientId","wrapperRef","Fragment","Slot","group","Provider","value","name"],"sources":["@wordpress/block-editor/src/components/block-toolbar/index.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useRef } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\nimport {\n\tgetBlockType,\n\thasBlockSupport,\n\tisReusableBlock,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { ToolbarGroup } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockMover from '../block-mover';\nimport BlockParentSelector from '../block-parent-selector';\nimport BlockSwitcher from '../block-switcher';\nimport BlockControls from '../block-controls';\nimport __unstableBlockToolbarLastItem from './block-toolbar-last-item';\nimport BlockSettingsMenu from '../block-settings-menu';\nimport { BlockLockToolbar } from '../block-lock';\nimport { BlockGroupToolbar } from '../convert-to-group-buttons';\nimport BlockEditVisuallyButton from '../block-edit-visually-button';\nimport { useShowHoveredOrFocusedGestures } from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport __unstableBlockNameContext from './block-name-context';\n\nconst BlockToolbar = ( { hideDragHandle } ) => {\n\tconst { blockClientIds, blockType, isValid, isVisual, blockEditingMode } =\n\t\tuseSelect( ( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockMode,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tisBlockValid,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst selectedBlockClientId = selectedBlockClientIds[ 0 ];\n\t\t\tconst blockRootClientId = getBlockRootClientId(\n\t\t\t\tselectedBlockClientId\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tblockClientIds: selectedBlockClientIds,\n\t\t\t\tblockType:\n\t\t\t\t\tselectedBlockClientId &&\n\t\t\t\t\tgetBlockType( getBlockName( selectedBlockClientId ) ),\n\t\t\t\trootClientId: blockRootClientId,\n\t\t\t\tisValid: selectedBlockClientIds.every( ( id ) =>\n\t\t\t\t\tisBlockValid( id )\n\t\t\t\t),\n\t\t\t\tisVisual: selectedBlockClientIds.every(\n\t\t\t\t\t( id ) => getBlockMode( id ) === 'visual'\n\t\t\t\t),\n\t\t\t\tblockEditingMode: getBlockEditingMode( selectedBlockClientId ),\n\t\t\t};\n\t\t}, [] );\n\n\tconst toolbarWrapperRef = useRef( null );\n\n\t// Handles highlighting the current block outline on hover or focus of the\n\t// block type toolbar area.\n\tconst nodeRef = useRef();\n\tconst showHoveredOrFocusedGestures = useShowHoveredOrFocusedGestures( {\n\t\tref: nodeRef,\n\t} );\n\n\tconst isLargeViewport = ! useViewportMatch( 'medium', '<' );\n\n\tif ( blockType ) {\n\t\tif ( ! hasBlockSupport( blockType, '__experimentalToolbar', true ) ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tif ( blockClientIds.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst shouldShowVisualToolbar = isValid && isVisual;\n\tconst isMultiToolbar = blockClientIds.length > 1;\n\tconst isSynced =\n\t\tisReusableBlock( blockType ) || isTemplatePart( blockType );\n\n\tconst classes = classnames( 'block-editor-block-toolbar', {\n\t\t'is-synced': isSynced,\n\t} );\n\n\treturn (\n\t\t<div className={ classes } ref={ toolbarWrapperRef }>\n\t\t\t{ ! isMultiToolbar &&\n\t\t\t\tisLargeViewport &&\n\t\t\t\tblockEditingMode === 'default' && <BlockParentSelector /> }\n\t\t\t{ ( shouldShowVisualToolbar || isMultiToolbar ) &&\n\t\t\t\tblockEditingMode === 'default' && (\n\t\t\t\t\t<div ref={ nodeRef } { ...showHoveredOrFocusedGestures }>\n\t\t\t\t\t\t<ToolbarGroup className=\"block-editor-block-toolbar__block-controls\">\n\t\t\t\t\t\t\t<BlockSwitcher clientIds={ blockClientIds } />\n\t\t\t\t\t\t\t{ ! isMultiToolbar && (\n\t\t\t\t\t\t\t\t<BlockLockToolbar\n\t\t\t\t\t\t\t\t\tclientId={ blockClientIds[ 0 ] }\n\t\t\t\t\t\t\t\t\twrapperRef={ toolbarWrapperRef }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<BlockMover\n\t\t\t\t\t\t\t\tclientIds={ blockClientIds }\n\t\t\t\t\t\t\t\thideDragHandle={ hideDragHandle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t{ shouldShowVisualToolbar && isMultiToolbar && (\n\t\t\t\t<BlockGroupToolbar />\n\t\t\t) }\n\t\t\t{ shouldShowVisualToolbar && (\n\t\t\t\t<>\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"parent\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"block\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockControls.Slot className=\"block-editor-block-toolbar__slot\" />\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"inline\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"other\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<__unstableBlockNameContext.Provider\n\t\t\t\t\t\tvalue={ blockType?.name }\n\t\t\t\t\t>\n\t\t\t\t\t\t<__unstableBlockToolbarLastItem.Slot />\n\t\t\t\t\t</__unstableBlockNameContext.Provider>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t<BlockEditVisuallyButton clientIds={ blockClientIds } />\n\t\t\t{ blockEditingMode === 'default' && (\n\t\t\t\t<BlockSettingsMenu clientIds={ blockClientIds } />\n\t\t\t) }\n\t\t</div>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-toolbar/README.md\n */\nexport default BlockToolbar;\n"],"mappings":";AAAA;AACA;AACA;AACA,OAAOA,UAAU,MAAM,YAAY;;AAEnC;AACA;AACA;AACA,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,MAAM,QAAQ,oBAAoB;AAC3C,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SACCC,YAAY,EACZC,eAAe,EACfC,eAAe,EACfC,cAAc,QACR,mBAAmB;AAC1B,SAASC,YAAY,QAAQ,uBAAuB;;AAEpD;AACA;AACA;AACA,OAAOC,UAAU,MAAM,gBAAgB;AACvC,OAAOC,mBAAmB,MAAM,0BAA0B;AAC1D,OAAOC,aAAa,MAAM,mBAAmB;AAC7C,OAAOC,aAAa,MAAM,mBAAmB;AAC7C,OAAOC,8BAA8B,MAAM,2BAA2B;AACtE,OAAOC,iBAAiB,MAAM,wBAAwB;AACtD,SAASC,gBAAgB,QAAQ,eAAe;AAChD,SAASC,iBAAiB,QAAQ,6BAA6B;AAC/D,OAAOC,uBAAuB,MAAM,+BAA+B;AACnE,SAASC,+BAA+B,QAAQ,SAAS;AACzD,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AACvD,OAAOC,0BAA0B,MAAM,sBAAsB;AAE7D,MAAMC,YAAY,GAAGA,CAAE;EAAEC;AAAe,CAAC,KAAM;EAC9C,MAAM;IAAEC,cAAc;IAAEC,SAAS;IAAEC,OAAO;IAAEC,QAAQ;IAAEC;EAAiB,CAAC,GACvE3B,SAAS,CAAI4B,MAAM,IAAM;IACxB,MAAM;MACLC,YAAY;MACZC,YAAY;MACZC,yBAAyB;MACzBC,YAAY;MACZC,oBAAoB;MACpBC;IACD,CAAC,GAAGN,MAAM,CAAET,gBAAiB,CAAC;IAC9B,MAAMgB,sBAAsB,GAAGJ,yBAAyB,CAAC,CAAC;IAC1D,MAAMK,qBAAqB,GAAGD,sBAAsB,CAAE,CAAC,CAAE;IACzD,MAAME,iBAAiB,GAAGJ,oBAAoB,CAC7CG,qBACD,CAAC;IACD,OAAO;MACNb,cAAc,EAAEY,sBAAsB;MACtCX,SAAS,EACRY,qBAAqB,IACrBjC,YAAY,CAAE0B,YAAY,CAAEO,qBAAsB,CAAE,CAAC;MACtDE,YAAY,EAAED,iBAAiB;MAC/BZ,OAAO,EAAEU,sBAAsB,CAACI,KAAK,CAAIC,EAAE,IAC1CR,YAAY,CAAEQ,EAAG,CAClB,CAAC;MACDd,QAAQ,EAAES,sBAAsB,CAACI,KAAK,CACnCC,EAAE,IAAMV,YAAY,CAAEU,EAAG,CAAC,KAAK,QAClC,CAAC;MACDb,gBAAgB,EAAEO,mBAAmB,CAAEE,qBAAsB;IAC9D,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAER,MAAMK,iBAAiB,GAAGxC,MAAM,CAAE,IAAK,CAAC;;EAExC;EACA;EACA,MAAMyC,OAAO,GAAGzC,MAAM,CAAC,CAAC;EACxB,MAAM0C,4BAA4B,GAAG1B,+BAA+B,CAAE;IACrE2B,GAAG,EAAEF;EACN,CAAE,CAAC;EAEH,MAAMG,eAAe,GAAG,CAAE3C,gBAAgB,CAAE,QAAQ,EAAE,GAAI,CAAC;EAE3D,IAAKsB,SAAS,EAAG;IAChB,IAAK,CAAEpB,eAAe,CAAEoB,SAAS,EAAE,uBAAuB,EAAE,IAAK,CAAC,EAAG;MACpE,OAAO,IAAI;IACZ;EACD;EAEA,IAAKD,cAAc,CAACuB,MAAM,KAAK,CAAC,EAAG;IAClC,OAAO,IAAI;EACZ;EAEA,MAAMC,uBAAuB,GAAGtB,OAAO,IAAIC,QAAQ;EACnD,MAAMsB,cAAc,GAAGzB,cAAc,CAACuB,MAAM,GAAG,CAAC;EAChD,MAAMG,QAAQ,GACb5C,eAAe,CAAEmB,SAAU,CAAC,IAAIlB,cAAc,CAAEkB,SAAU,CAAC;EAE5D,MAAM0B,OAAO,GAAGnD,UAAU,CAAE,4BAA4B,EAAE;IACzD,WAAW,EAAEkD;EACd,CAAE,CAAC;EAEH,OACCE,aAAA;IAAKC,SAAS,EAAGF,OAAS;IAACN,GAAG,EAAGH;EAAmB,GACjD,CAAEO,cAAc,IACjBH,eAAe,IACflB,gBAAgB,KAAK,SAAS,IAAIwB,aAAA,CAAC1C,mBAAmB,MAAE,CAAC,EACxD,CAAEsC,uBAAuB,IAAIC,cAAc,KAC5CrB,gBAAgB,KAAK,SAAS,IAC7BwB,aAAA;IAAKP,GAAG,EAAGF,OAAS;IAAA,GAAMC;EAA4B,GACrDQ,aAAA,CAAC5C,YAAY;IAAC6C,SAAS,EAAC;EAA4C,GACnED,aAAA,CAACzC,aAAa;IAAC2C,SAAS,EAAG9B;EAAgB,CAAE,CAAC,EAC5C,CAAEyB,cAAc,IACjBG,aAAA,CAACrC,gBAAgB;IAChBwC,QAAQ,EAAG/B,cAAc,CAAE,CAAC,CAAI;IAChCgC,UAAU,EAAGd;EAAmB,CAChC,CACD,EACDU,aAAA,CAAC3C,UAAU;IACV6C,SAAS,EAAG9B,cAAgB;IAC5BD,cAAc,EAAGA;EAAgB,CACjC,CACY,CACV,CACL,EACAyB,uBAAuB,IAAIC,cAAc,IAC1CG,aAAA,CAACpC,iBAAiB,MAAE,CACpB,EACCgC,uBAAuB,IACxBI,aAAA,CAAAK,QAAA,QACCL,aAAA,CAACxC,aAAa,CAAC8C,IAAI;IAClBC,KAAK,EAAC,QAAQ;IACdN,SAAS,EAAC;EAAkC,CAC5C,CAAC,EACFD,aAAA,CAACxC,aAAa,CAAC8C,IAAI;IAClBC,KAAK,EAAC,OAAO;IACbN,SAAS,EAAC;EAAkC,CAC5C,CAAC,EACFD,aAAA,CAACxC,aAAa,CAAC8C,IAAI;IAACL,SAAS,EAAC;EAAkC,CAAE,CAAC,EACnED,aAAA,CAACxC,aAAa,CAAC8C,IAAI;IAClBC,KAAK,EAAC,QAAQ;IACdN,SAAS,EAAC;EAAkC,CAC5C,CAAC,EACFD,aAAA,CAACxC,aAAa,CAAC8C,IAAI;IAClBC,KAAK,EAAC,OAAO;IACbN,SAAS,EAAC;EAAkC,CAC5C,CAAC,EACFD,aAAA,CAAC/B,0BAA0B,CAACuC,QAAQ;IACnCC,KAAK,EAAGpC,SAAS,EAAEqC;EAAM,GAEzBV,aAAA,CAACvC,8BAA8B,CAAC6C,IAAI,MAAE,CACF,CACpC,CACF,EACDN,aAAA,CAACnC,uBAAuB;IAACqC,SAAS,EAAG9B;EAAgB,CAAE,CAAC,EACtDI,gBAAgB,KAAK,SAAS,IAC/BwB,aAAA,CAACtC,iBAAiB;IAACwC,SAAS,EAAG9B;EAAgB,CAAE,CAE9C,CAAC;AAER,CAAC;;AAED;AACA;AACA;AACA,eAAeF,YAAY"}