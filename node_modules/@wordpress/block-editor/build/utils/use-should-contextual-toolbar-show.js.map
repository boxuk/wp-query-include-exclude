{"version":3,"names":["_data","require","_blocks","_compose","_store","_lockUnlock","useShouldContextualToolbarShow","isLargeViewport","useViewportMatch","shouldShowContextualToolbar","canFocusHiddenToolbar","fixedToolbarCanBeFocused","useSelect","select","__unstableGetEditorMode","isMultiSelecting","isTyping","isBlockInterfaceHidden","getBlock","getSettings","isNavigationMode","getSelectedBlockClientId","getFirstMultiSelectedBlockClientId","unlock","blockEditorStore","isEditMode","hasFixedToolbar","isDistractionFree","selectedBlockId","hasSelectedBlockId","isEmptyDefaultBlock","isUnmodifiedDefaultBlock","_shouldShowContextualToolbar","_canFocusHiddenToolbar"],"sources":["@wordpress/block-editor/src/utils/use-should-contextual-toolbar-show.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\nimport { useViewportMatch } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { unlock } from '../lock-unlock';\n\n/**\n * Returns true if the contextual block toolbar should show, or false if it should be hidden.\n *\n * @return {boolean} Whether the block toolbar is hidden.\n */\nexport function useShouldContextualToolbarShow() {\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\n\tconst {\n\t\tshouldShowContextualToolbar,\n\t\tcanFocusHiddenToolbar,\n\t\tfixedToolbarCanBeFocused,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t\tisMultiSelecting,\n\t\t\t\tisTyping,\n\t\t\t\tisBlockInterfaceHidden,\n\t\t\t\tgetBlock,\n\t\t\t\tgetSettings,\n\t\t\t\tisNavigationMode,\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tgetFirstMultiSelectedBlockClientId,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\n\t\t\tconst isEditMode = __unstableGetEditorMode() === 'edit';\n\t\t\tconst hasFixedToolbar = getSettings().hasFixedToolbar;\n\t\t\tconst isDistractionFree = getSettings().isDistractionFree;\n\t\t\tconst selectedBlockId =\n\t\t\t\tgetFirstMultiSelectedBlockClientId() ||\n\t\t\t\tgetSelectedBlockClientId();\n\t\t\tconst hasSelectedBlockId = !! selectedBlockId;\n\t\t\tconst isEmptyDefaultBlock = isUnmodifiedDefaultBlock(\n\t\t\t\tgetBlock( selectedBlockId ) || {}\n\t\t\t);\n\n\t\t\tconst _shouldShowContextualToolbar =\n\t\t\t\tisEditMode &&\n\t\t\t\t! hasFixedToolbar &&\n\t\t\t\t( ! isDistractionFree || isNavigationMode() ) &&\n\t\t\t\tisLargeViewport &&\n\t\t\t\t! isMultiSelecting() &&\n\t\t\t\t! isTyping() &&\n\t\t\t\thasSelectedBlockId &&\n\t\t\t\t! isEmptyDefaultBlock &&\n\t\t\t\t! isBlockInterfaceHidden();\n\n\t\t\tconst _canFocusHiddenToolbar =\n\t\t\t\tisEditMode &&\n\t\t\t\thasSelectedBlockId &&\n\t\t\t\t! _shouldShowContextualToolbar &&\n\t\t\t\t! hasFixedToolbar &&\n\t\t\t\t! isDistractionFree &&\n\t\t\t\t! isEmptyDefaultBlock;\n\n\t\t\treturn {\n\t\t\t\tshouldShowContextualToolbar: _shouldShowContextualToolbar,\n\t\t\t\tcanFocusHiddenToolbar: _canFocusHiddenToolbar,\n\t\t\t\tfixedToolbarCanBeFocused:\n\t\t\t\t\t( hasFixedToolbar || ! isLargeViewport ) && selectedBlockId,\n\t\t\t};\n\t\t},\n\t\t[ isLargeViewport ]\n\t);\n\n\treturn {\n\t\tshouldShowContextualToolbar,\n\t\tcanFocusHiddenToolbar,\n\t\tfixedToolbarCanBeFocused,\n\t};\n}\n"],"mappings":";;;;;;AAGA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AAKA,IAAAG,MAAA,GAAAH,OAAA;AACA,IAAAI,WAAA,GAAAJ,OAAA;AAXA;AACA;AACA;;AAKA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACO,SAASK,8BAA8BA,CAAA,EAAG;EAChD,MAAMC,eAAe,GAAG,IAAAC,yBAAgB,EAAE,QAAS,CAAC;EAEpD,MAAM;IACLC,2BAA2B;IAC3BC,qBAAqB;IACrBC;EACD,CAAC,GAAG,IAAAC,eAAS,EACVC,MAAM,IAAM;IACb,MAAM;MACLC,uBAAuB;MACvBC,gBAAgB;MAChBC,QAAQ;MACRC,sBAAsB;MACtBC,QAAQ;MACRC,WAAW;MACXC,gBAAgB;MAChBC,wBAAwB;MACxBC;IACD,CAAC,GAAG,IAAAC,kBAAM,EAAEV,MAAM,CAAEW,YAAiB,CAAE,CAAC;IAExC,MAAMC,UAAU,GAAGX,uBAAuB,CAAC,CAAC,KAAK,MAAM;IACvD,MAAMY,eAAe,GAAGP,WAAW,CAAC,CAAC,CAACO,eAAe;IACrD,MAAMC,iBAAiB,GAAGR,WAAW,CAAC,CAAC,CAACQ,iBAAiB;IACzD,MAAMC,eAAe,GACpBN,kCAAkC,CAAC,CAAC,IACpCD,wBAAwB,CAAC,CAAC;IAC3B,MAAMQ,kBAAkB,GAAG,CAAC,CAAED,eAAe;IAC7C,MAAME,mBAAmB,GAAG,IAAAC,gCAAwB,EACnDb,QAAQ,CAAEU,eAAgB,CAAC,IAAI,CAAC,CACjC,CAAC;IAED,MAAMI,4BAA4B,GACjCP,UAAU,IACV,CAAEC,eAAe,KACf,CAAEC,iBAAiB,IAAIP,gBAAgB,CAAC,CAAC,CAAE,IAC7Cb,eAAe,IACf,CAAEQ,gBAAgB,CAAC,CAAC,IACpB,CAAEC,QAAQ,CAAC,CAAC,IACZa,kBAAkB,IAClB,CAAEC,mBAAmB,IACrB,CAAEb,sBAAsB,CAAC,CAAC;IAE3B,MAAMgB,sBAAsB,GAC3BR,UAAU,IACVI,kBAAkB,IAClB,CAAEG,4BAA4B,IAC9B,CAAEN,eAAe,IACjB,CAAEC,iBAAiB,IACnB,CAAEG,mBAAmB;IAEtB,OAAO;MACNrB,2BAA2B,EAAEuB,4BAA4B;MACzDtB,qBAAqB,EAAEuB,sBAAsB;MAC7CtB,wBAAwB,EACvB,CAAEe,eAAe,IAAI,CAAEnB,eAAe,KAAMqB;IAC9C,CAAC;EACF,CAAC,EACD,CAAErB,eAAe,CAClB,CAAC;EAED,OAAO;IACNE,2BAA2B;IAC3BC,qBAAqB;IACrBC;EACD,CAAC;AACF"}