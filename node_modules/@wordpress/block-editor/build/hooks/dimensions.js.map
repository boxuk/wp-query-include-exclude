{"version":3,"names":["_element","require","_data","_blocks","_deprecated","_interopRequireDefault","_inspectorControls","_globalStyles","_margin","_padding","_store","_lockUnlock","_utils","DIMENSIONS_SUPPORT_KEY","exports","SPACING_SUPPORT_KEY","ALL_SIDES","AXIAL_SIDES","useVisualizer","property","setProperty","useState","hideBlockInterface","showBlockInterface","unlock","useDispatch","blockEditorStore","useEffect","DimensionsInspectorControl","children","resetAllFilter","attributesResetAllFilter","useCallback","attributes","existingStyle","style","updatedStyle","createElement","default","group","DimensionsPanel","props","clientId","name","setAttributes","__unstableParentLayout","settings","useBlockSettings","isEnabled","useHasDimensionsPanel","value","visualizedProperty","setVisualizedProperty","onChange","newStyle","cleanEmptyObject","defaultDimensionsControls","getBlockSupport","defaultSpacingControls","defaultControls","Fragment","as","panelId","onVisualize","spacing","padding","PaddingVisualizer","forceShow","margin","MarginVisualizer","useCustomSides","deprecated","since","version"],"sources":["@wordpress/block-editor/src/hooks/dimensions.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useEffect, useCallback } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { getBlockSupport } from '@wordpress/blocks';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport InspectorControls from '../components/inspector-controls';\nimport {\n\tDimensionsPanel as StylesDimensionsPanel,\n\tuseHasDimensionsPanel,\n} from '../components/global-styles';\nimport { MarginVisualizer } from './margin';\nimport { PaddingVisualizer } from './padding';\nimport { store as blockEditorStore } from '../store';\nimport { unlock } from '../lock-unlock';\n\nimport { cleanEmptyObject, useBlockSettings } from './utils';\n\nexport const DIMENSIONS_SUPPORT_KEY = 'dimensions';\nexport const SPACING_SUPPORT_KEY = 'spacing';\nexport const ALL_SIDES = [ 'top', 'right', 'bottom', 'left' ];\nexport const AXIAL_SIDES = [ 'vertical', 'horizontal' ];\n\nfunction useVisualizer() {\n\tconst [ property, setProperty ] = useState( false );\n\tconst { hideBlockInterface, showBlockInterface } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\tuseEffect( () => {\n\t\tif ( ! property ) {\n\t\t\tshowBlockInterface();\n\t\t} else {\n\t\t\thideBlockInterface();\n\t\t}\n\t}, [ property, showBlockInterface, hideBlockInterface ] );\n\n\treturn [ property, setProperty ];\n}\n\nfunction DimensionsInspectorControl( { children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributes.style;\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\tstyle: updatedStyle,\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"dimensions\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function DimensionsPanel( props ) {\n\tconst {\n\t\tclientId,\n\t\tname,\n\t\tattributes,\n\t\tsetAttributes,\n\t\t__unstableParentLayout,\n\t} = props;\n\tconst settings = useBlockSettings( name, __unstableParentLayout );\n\tconst isEnabled = useHasDimensionsPanel( settings );\n\tconst value = attributes.style;\n\tconst [ visualizedProperty, setVisualizedProperty ] = useVisualizer();\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( newStyle ),\n\t\t} );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultDimensionsControls = getBlockSupport( props.name, [\n\t\tDIMENSIONS_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\tconst defaultSpacingControls = getBlockSupport( props.name, [\n\t\tSPACING_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\tconst defaultControls = {\n\t\t...defaultDimensionsControls,\n\t\t...defaultSpacingControls,\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<StylesDimensionsPanel\n\t\t\t\tas={ DimensionsInspectorControl }\n\t\t\t\tpanelId={ clientId }\n\t\t\t\tsettings={ settings }\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tdefaultControls={ defaultControls }\n\t\t\t\tonVisualize={ setVisualizedProperty }\n\t\t\t/>\n\t\t\t{ !! settings?.spacing?.padding && (\n\t\t\t\t<PaddingVisualizer\n\t\t\t\t\tforceShow={ visualizedProperty === 'padding' }\n\t\t\t\t\t{ ...props }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ !! settings?.spacing?.margin && (\n\t\t\t\t<MarginVisualizer\n\t\t\t\t\tforceShow={ visualizedProperty === 'margin' }\n\t\t\t\t\t{ ...props }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\n/**\n * @deprecated\n */\nexport function useCustomSides() {\n\tdeprecated( 'wp.blockEditor.__experimentalUseCustomSides', {\n\t\tsince: '6.3',\n\t\tversion: '6.4',\n\t} );\n}\n"],"mappings":"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"}