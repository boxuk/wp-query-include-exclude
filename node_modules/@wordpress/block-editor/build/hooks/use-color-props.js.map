{"version":3,"names":["_classnames","_interopRequireDefault","require","_element","_style","_colors","_gradients","_useSetting","getColorClassesAndStyles","attributes","backgroundColor","textColor","gradient","style","backgroundClass","getColorClassName","textClass","gradientClass","__experimentalGetGradientClass","hasGradient","color","className","classnames","text","background","elements","link","colorStyles","styleProp","getInlineStyles","undefined","EMPTY_OBJECT","useColorProps","userPalette","useSetting","themePalette","defaultPalette","gradientsPerOrigin","colors","useMemo","gradients","custom","theme","default","colorProps","backgroundColorObject","getColorObjectByAttributeValues","getGradientValueBySlug","textColorObject"],"sources":["@wordpress/block-editor/src/hooks/use-color-props.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\nimport {\n\tgetColorClassName,\n\tgetColorObjectByAttributeValues,\n} from '../components/colors';\nimport {\n\t__experimentalGetGradientClass,\n\tgetGradientValueBySlug,\n} from '../components/gradients';\nimport useSetting from '../components/use-setting';\n\n// The code in this file has largely been lifted from the color block support\n// hook.\n//\n// This utility is intended to assist where the serialization of the colors\n// block support is being skipped for a block but the color related CSS classes\n// & styles still need to be generated so they can be applied to inner elements.\n\n/**\n * Provides the CSS class names and inline styles for a block's color support\n * attributes.\n *\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} Color block support derived CSS classes & styles.\n */\nexport function getColorClassesAndStyles( attributes ) {\n\tconst { backgroundColor, textColor, gradient, style } = attributes;\n\n\t// Collect color CSS classes.\n\tconst backgroundClass = getColorClassName(\n\t\t'background-color',\n\t\tbackgroundColor\n\t);\n\tconst textClass = getColorClassName( 'color', textColor );\n\n\tconst gradientClass = __experimentalGetGradientClass( gradient );\n\tconst hasGradient = gradientClass || style?.color?.gradient;\n\n\t// Determine color CSS class name list.\n\tconst className = classnames( textClass, gradientClass, {\n\t\t// Don't apply the background class if there's a gradient.\n\t\t[ backgroundClass ]: ! hasGradient && !! backgroundClass,\n\t\t'has-text-color': textColor || style?.color?.text,\n\t\t'has-background':\n\t\t\tbackgroundColor ||\n\t\t\tstyle?.color?.background ||\n\t\t\tgradient ||\n\t\t\tstyle?.color?.gradient,\n\t\t'has-link-color': style?.elements?.link?.color,\n\t} );\n\n\t// Collect inline styles for colors.\n\tconst colorStyles = style?.color || {};\n\tconst styleProp = getInlineStyles( { color: colorStyles } );\n\n\treturn {\n\t\tclassName: className || undefined,\n\t\tstyle: styleProp,\n\t};\n}\n\nconst EMPTY_OBJECT = {};\n\n/**\n * Determines the color related props for a block derived from its color block\n * support attributes.\n *\n * Inline styles are forced for named colors to ensure these selections are\n * reflected when themes do not load their color stylesheets in the editor.\n *\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} ClassName & style props from colors block support.\n */\nexport function useColorProps( attributes ) {\n\tconst { backgroundColor, textColor, gradient } = attributes;\n\n\t// Some color settings have a special handling for deprecated flags in `useSetting`,\n\t// so we can't unwrap them by doing const { ... } = useSetting('color')\n\t// until https://github.com/WordPress/gutenberg/issues/37094 is fixed.\n\tconst userPalette = useSetting( 'color.palette.custom' );\n\tconst themePalette = useSetting( 'color.palette.theme' );\n\tconst defaultPalette = useSetting( 'color.palette.default' );\n\tconst gradientsPerOrigin = useSetting( 'color.gradients' ) || EMPTY_OBJECT;\n\tconst colors = useMemo(\n\t\t() => [\n\t\t\t...( userPalette || [] ),\n\t\t\t...( themePalette || [] ),\n\t\t\t...( defaultPalette || [] ),\n\t\t],\n\t\t[ userPalette, themePalette, defaultPalette ]\n\t);\n\tconst gradients = useMemo(\n\t\t() => [\n\t\t\t...( gradientsPerOrigin?.custom || [] ),\n\t\t\t...( gradientsPerOrigin?.theme || [] ),\n\t\t\t...( gradientsPerOrigin?.default || [] ),\n\t\t],\n\t\t[ gradientsPerOrigin ]\n\t);\n\n\tconst colorProps = getColorClassesAndStyles( attributes );\n\n\t// Force inline styles to apply colors when themes do not load their color\n\t// stylesheets in the editor.\n\tif ( backgroundColor ) {\n\t\tconst backgroundColorObject = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\tbackgroundColor\n\t\t);\n\n\t\tcolorProps.style.backgroundColor = backgroundColorObject.color;\n\t}\n\n\tif ( gradient ) {\n\t\tcolorProps.style.background = getGradientValueBySlug(\n\t\t\tgradients,\n\t\t\tgradient\n\t\t);\n\t}\n\n\tif ( textColor ) {\n\t\tconst textColorObject = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\ttextColor\n\t\t);\n\n\t\tcolorProps.style.color = textColorObject.color;\n\t}\n\n\treturn colorProps;\n}\n"],"mappings":"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"}