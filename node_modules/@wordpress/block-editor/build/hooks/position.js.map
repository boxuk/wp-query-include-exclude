{"version":3,"names":["_element","require","_classnames","_interopRequireDefault","_i18n","_blocks","_components","_compose","_data","_hooks","_blockList","_useSetting","_inspectorControls","_useBlockDisplayInformation","_utils","_lockUnlock","_store","CustomSelectControl","unlock","componentsPrivateApis","POSITION_SUPPORT_KEY","OPTION_CLASSNAME","DEFAULT_OPTION","key","value","name","__","className","STICKY_OPTION","_x","__experimentalHint","FIXED_OPTION","POSITION_SIDES","VALID_POSITION_TYPES","getPositionCSS","selector","style","output","type","positionType","position","includes","forEach","side","undefined","hasStickyPositionSupport","blockType","support","getBlockSupport","sticky","hasFixedPositionSupport","fixed","hasPositionSupport","hasPositionValue","props","attributes","hasStickyOrFixedPositionValue","resetPosition","setAttributes","cleanEmptyObject","top","right","bottom","left","useIsPositionDisabled","blockName","allowFixed","useSetting","allowSticky","isDisabled","PositionPanel","clientId","firstParentClientId","useSelect","select","getBlockParents","blockEditorStore","parents","length","blockInformation","useBlockDisplayInformation","stickyHelpText","sprintf","title","options","useMemo","availableOptions","push","onChangeType","next","placementValue","newStyle","selectedOption","find","option","Platform","web","createElement","default","group","BaseControl","__nextHasNoMarginBottom","help","__nextUnconstrainedWidth","__next36pxDefaultSize","label","hideLabelFromVision","describedBy","__experimentalShowSelectedHint","onChange","selectedItem","size","native","withInspectorControls","createHigherOrderComponent","BlockEdit","positionSupport","hasBlockSupport","isPositionDisabled","showPositionControls","exports","withPositionStyles","BlockListBlock","hasPositionBlockSupport","allowPositionStyles","id","useInstanceId","element","useContext","BlockList","__unstableElementContext","positionSelector","css","classnames","Fragment","createPortal","addFilter"],"sources":["@wordpress/block-editor/src/hooks/position.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport {\n\tBaseControl,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { createHigherOrderComponent, useInstanceId } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tuseContext,\n\tuseMemo,\n\tcreatePortal,\n\tPlatform,\n} from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport BlockList from '../components/block-list';\nimport useSetting from '../components/use-setting';\nimport InspectorControls from '../components/inspector-controls';\nimport useBlockDisplayInformation from '../components/use-block-display-information';\nimport { cleanEmptyObject } from './utils';\nimport { unlock } from '../lock-unlock';\nimport { store as blockEditorStore } from '../store';\n\nconst { CustomSelectControl } = unlock( componentsPrivateApis );\n\nconst POSITION_SUPPORT_KEY = 'position';\n\nconst OPTION_CLASSNAME =\n\t'block-editor-hooks__position-selection__select-control__option';\n\nconst DEFAULT_OPTION = {\n\tkey: 'default',\n\tvalue: '',\n\tname: __( 'Default' ),\n\tclassName: OPTION_CLASSNAME,\n};\n\nconst STICKY_OPTION = {\n\tkey: 'sticky',\n\tvalue: 'sticky',\n\tname: _x( 'Sticky', 'Name for the value of the CSS position property' ),\n\tclassName: OPTION_CLASSNAME,\n\t__experimentalHint: __(\n\t\t'The block will stick to the top of the window instead of scrolling.'\n\t),\n};\n\nconst FIXED_OPTION = {\n\tkey: 'fixed',\n\tvalue: 'fixed',\n\tname: _x( 'Fixed', 'Name for the value of the CSS position property' ),\n\tclassName: OPTION_CLASSNAME,\n\t__experimentalHint: __(\n\t\t'The block will not move when the page is scrolled.'\n\t),\n};\n\nconst POSITION_SIDES = [ 'top', 'right', 'bottom', 'left' ];\nconst VALID_POSITION_TYPES = [ 'sticky', 'fixed' ];\n\n/**\n * Get calculated position CSS.\n *\n * @param {Object} props          Component props.\n * @param {string} props.selector Selector to use.\n * @param {Object} props.style    Style object.\n * @return {string} The generated CSS rules.\n */\nexport function getPositionCSS( { selector, style } ) {\n\tlet output = '';\n\n\tconst { type: positionType } = style?.position || {};\n\n\tif ( ! VALID_POSITION_TYPES.includes( positionType ) ) {\n\t\treturn output;\n\t}\n\n\toutput += `${ selector } {`;\n\toutput += `position: ${ positionType };`;\n\n\tPOSITION_SIDES.forEach( ( side ) => {\n\t\tif ( style?.position?.[ side ] !== undefined ) {\n\t\t\toutput += `${ side }: ${ style.position[ side ] };`;\n\t\t}\n\t} );\n\n\tif ( positionType === 'sticky' || positionType === 'fixed' ) {\n\t\t// TODO: Replace hard-coded z-index value with a z-index preset approach in theme.json.\n\t\toutput += `z-index: 10`;\n\t}\n\toutput += `}`;\n\n\treturn output;\n}\n\n/**\n * Determines if there is sticky position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasStickyPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! ( true === support || support?.sticky );\n}\n\n/**\n * Determines if there is fixed position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasFixedPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! ( true === support || support?.fixed );\n}\n\n/**\n * Determines if there is position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! support;\n}\n\n/**\n * Checks if there is a current value in the position block support attributes.\n *\n * @param {Object} props Block props.\n * @return {boolean} Whether or not the block has a position value set.\n */\nexport function hasPositionValue( props ) {\n\treturn props.attributes.style?.position?.type !== undefined;\n}\n\n/**\n * Checks if the block is currently set to a sticky or fixed position.\n * This check is helpful for determining how to position block toolbars or other elements.\n *\n * @param {Object} attributes Block attributes.\n * @return {boolean} Whether or not the block is set to a sticky or fixed position.\n */\nexport function hasStickyOrFixedPositionValue( attributes ) {\n\tconst positionType = attributes.style?.position?.type;\n\treturn positionType === 'sticky' || positionType === 'fixed';\n}\n\n/**\n * Resets the position block support attributes. This can be used when disabling\n * the position support controls for a block via a `ToolsPanel`.\n *\n * @param {Object} props               Block props.\n * @param {Object} props.attributes    Block's attributes.\n * @param {Object} props.setAttributes Function to set block's attributes.\n */\nexport function resetPosition( { attributes = {}, setAttributes } ) {\n\tconst { style = {} } = attributes;\n\n\tsetAttributes( {\n\t\tstyle: cleanEmptyObject( {\n\t\t\t...style,\n\t\t\tposition: {\n\t\t\t\t...style?.position,\n\t\t\t\ttype: undefined,\n\t\t\t\ttop: undefined,\n\t\t\t\tright: undefined,\n\t\t\t\tbottom: undefined,\n\t\t\t\tleft: undefined,\n\t\t\t},\n\t\t} ),\n\t} );\n}\n\n/**\n * Custom hook that checks if position settings have been disabled.\n *\n * @param {string} name The name of the block.\n *\n * @return {boolean} Whether padding setting is disabled.\n */\nexport function useIsPositionDisabled( { name: blockName } = {} ) {\n\tconst allowFixed = useSetting( 'position.fixed' );\n\tconst allowSticky = useSetting( 'position.sticky' );\n\tconst isDisabled = ! allowFixed && ! allowSticky;\n\n\treturn ! hasPositionSupport( blockName ) || isDisabled;\n}\n\n/*\n * Position controls rendered in an inspector control panel.\n *\n * @param {Object} props\n *\n * @return {WPElement} Position panel.\n */\nexport function PositionPanel( props ) {\n\tconst {\n\t\tattributes: { style = {} },\n\t\tclientId,\n\t\tname: blockName,\n\t\tsetAttributes,\n\t} = props;\n\n\tconst allowFixed = hasFixedPositionSupport( blockName );\n\tconst allowSticky = hasStickyPositionSupport( blockName );\n\tconst value = style?.position?.type;\n\n\tconst { firstParentClientId } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockParents } = select( blockEditorStore );\n\t\t\tconst parents = getBlockParents( clientId );\n\t\t\treturn { firstParentClientId: parents[ parents.length - 1 ] };\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst blockInformation = useBlockDisplayInformation( firstParentClientId );\n\tconst stickyHelpText =\n\t\tallowSticky && value === STICKY_OPTION.value && blockInformation\n\t\t\t? sprintf(\n\t\t\t\t\t/* translators: %s: the name of the parent block. */\n\t\t\t\t\t__(\n\t\t\t\t\t\t'The block will stick to the scrollable area of the parent %s block.'\n\t\t\t\t\t),\n\t\t\t\t\tblockInformation.title\n\t\t\t  )\n\t\t\t: null;\n\n\tconst options = useMemo( () => {\n\t\tconst availableOptions = [ DEFAULT_OPTION ];\n\t\t// Display options if they are allowed, or if a block already has a valid value set.\n\t\t// This allows for a block to be switched off from a position type that is not allowed.\n\t\tif ( allowSticky || value === STICKY_OPTION.value ) {\n\t\t\tavailableOptions.push( STICKY_OPTION );\n\t\t}\n\t\tif ( allowFixed || value === FIXED_OPTION.value ) {\n\t\t\tavailableOptions.push( FIXED_OPTION );\n\t\t}\n\t\treturn availableOptions;\n\t}, [ allowFixed, allowSticky, value ] );\n\n\tconst onChangeType = ( next ) => {\n\t\t// For now, use a hard-coded `0px` value for the position.\n\t\t// `0px` is preferred over `0` as it can be used in `calc()` functions.\n\t\t// In the future, it could be useful to allow for an offset value.\n\t\tconst placementValue = '0px';\n\n\t\tconst newStyle = {\n\t\t\t...style,\n\t\t\tposition: {\n\t\t\t\t...style?.position,\n\t\t\t\ttype: next,\n\t\t\t\ttop:\n\t\t\t\t\tnext === 'sticky' || next === 'fixed'\n\t\t\t\t\t\t? placementValue\n\t\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t};\n\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( newStyle ),\n\t\t} );\n\t};\n\n\tconst selectedOption = value\n\t\t? options.find( ( option ) => option.value === value ) || DEFAULT_OPTION\n\t\t: DEFAULT_OPTION;\n\n\t// Only display position controls if there is at least one option to choose from.\n\treturn Platform.select( {\n\t\tweb:\n\t\t\toptions.length > 1 ? (\n\t\t\t\t<InspectorControls group=\"position\">\n\t\t\t\t\t<BaseControl\n\t\t\t\t\t\tclassName=\"block-editor-hooks__position-selection\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\thelp={ stickyHelpText }\n\t\t\t\t\t>\n\t\t\t\t\t\t<CustomSelectControl\n\t\t\t\t\t\t\t__nextUnconstrainedWidth\n\t\t\t\t\t\t\t__next36pxDefaultSize\n\t\t\t\t\t\t\tclassName=\"block-editor-hooks__position-selection__select-control\"\n\t\t\t\t\t\t\tlabel={ __( 'Position' ) }\n\t\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\t\tdescribedBy={ sprintf(\n\t\t\t\t\t\t\t\t// translators: %s: Currently selected position.\n\t\t\t\t\t\t\t\t__( 'Currently selected position: %s' ),\n\t\t\t\t\t\t\t\tselectedOption.name\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\toptions={ options }\n\t\t\t\t\t\t\tvalue={ selectedOption }\n\t\t\t\t\t\t\t__experimentalShowSelectedHint\n\t\t\t\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\t\t\t\tonChangeType( selectedItem.value );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</BaseControl>\n\t\t\t\t</InspectorControls>\n\t\t\t) : null,\n\t\tnative: null,\n\t} );\n}\n\n/**\n * Override the default edit UI to include position controls.\n *\n * @param {Function} BlockEdit Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withInspectorControls = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\tconst { name: blockName } = props;\n\t\tconst positionSupport = hasBlockSupport(\n\t\t\tblockName,\n\t\t\tPOSITION_SUPPORT_KEY\n\t\t);\n\t\tconst isPositionDisabled = useIsPositionDisabled( props );\n\t\tconst showPositionControls = positionSupport && ! isPositionDisabled;\n\n\t\treturn [\n\t\t\tshowPositionControls && (\n\t\t\t\t<PositionPanel key=\"position\" { ...props } />\n\t\t\t),\n\t\t\t<BlockEdit key=\"edit\" { ...props } />,\n\t\t];\n\t},\n\t'withInspectorControls'\n);\n\n/**\n * Override the default block element to add the position styles.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withPositionStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst { name, attributes } = props;\n\t\tconst hasPositionBlockSupport = hasBlockSupport(\n\t\t\tname,\n\t\t\tPOSITION_SUPPORT_KEY\n\t\t);\n\t\tconst isPositionDisabled = useIsPositionDisabled( props );\n\t\tconst allowPositionStyles =\n\t\t\thasPositionBlockSupport && ! isPositionDisabled;\n\n\t\tconst id = useInstanceId( BlockListBlock );\n\t\tconst element = useContext( BlockList.__unstableElementContext );\n\n\t\t// Higher specificity to override defaults in editor UI.\n\t\tconst positionSelector = `.wp-container-${ id }.wp-container-${ id }`;\n\n\t\t// Get CSS string for the current position values.\n\t\tlet css;\n\t\tif ( allowPositionStyles ) {\n\t\t\tcss =\n\t\t\t\tgetPositionCSS( {\n\t\t\t\t\tselector: positionSelector,\n\t\t\t\t\tstyle: attributes?.style,\n\t\t\t\t} ) || '';\n\t\t}\n\n\t\t// Attach a `wp-container-` id-based class name.\n\t\tconst className = classnames( props?.className, {\n\t\t\t[ `wp-container-${ id }` ]: allowPositionStyles && !! css, // Only attach a container class if there is generated CSS to be attached.\n\t\t\t[ `is-position-${ attributes?.style?.position?.type }` ]:\n\t\t\t\tallowPositionStyles &&\n\t\t\t\t!! css &&\n\t\t\t\t!! attributes?.style?.position?.type,\n\t\t} );\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ allowPositionStyles &&\n\t\t\t\t\telement &&\n\t\t\t\t\t!! css &&\n\t\t\t\t\tcreatePortal( <style>{ css }</style>, element ) }\n\t\t\t\t<BlockListBlock { ...props } className={ className } />\n\t\t\t</>\n\t\t);\n\t},\n\t'withPositionStyles'\n);\n\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/editor/position/with-position-styles',\n\twithPositionStyles\n);\naddFilter(\n\t'editor.BlockEdit',\n\t'core/editor/position/with-inspector-controls',\n\twithInspectorControls\n);\n"],"mappings":"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"}