{"version":3,"names":["_i18n","require","_components","_data","_richText","_blockControls","_interopRequireDefault","_formatToolbar","_navigableToolbar","_store","InlineSelectionToolbar","editableContentElement","activeFormats","lastFormat","length","lastFormatType","type","settings","useSelect","select","richTextStore","getFormatType","popoverAnchor","useAnchor","_element","createElement","InlineToolbar","Popover","placement","focusOnMount","anchor","className","__unstableSlotName","default","__","ToolbarGroup","FormatToolbarContainer","inline","value","hasInlineToolbar","blockEditorStore","getSettings","getActiveFormats","isCollapsed","group","_default","exports"],"sources":["@wordpress/block-editor/src/components/rich-text/format-toolbar-container.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Popover, ToolbarGroup } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tisCollapsed,\n\tgetActiveFormats,\n\tuseAnchor,\n\tstore as richTextStore,\n} from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport BlockControls from '../block-controls';\nimport FormatToolbar from './format-toolbar';\nimport NavigableToolbar from '../navigable-toolbar';\nimport { store as blockEditorStore } from '../../store';\n\nfunction InlineSelectionToolbar( { editableContentElement, activeFormats } ) {\n\tconst lastFormat = activeFormats[ activeFormats.length - 1 ];\n\tconst lastFormatType = lastFormat?.type;\n\tconst settings = useSelect(\n\t\t( select ) => select( richTextStore ).getFormatType( lastFormatType ),\n\t\t[ lastFormatType ]\n\t);\n\tconst popoverAnchor = useAnchor( {\n\t\teditableContentElement,\n\t\tsettings,\n\t} );\n\n\treturn <InlineToolbar popoverAnchor={ popoverAnchor } />;\n}\n\nfunction InlineToolbar( { popoverAnchor } ) {\n\treturn (\n\t\t<Popover\n\t\t\tplacement=\"top\"\n\t\t\tfocusOnMount={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar\"\n\t\t\t__unstableSlotName=\"block-toolbar\"\n\t\t>\n\t\t\t<NavigableToolbar\n\t\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar-group\"\n\t\t\t\t/* translators: accessibility text for the inline format toolbar */\n\t\t\t\taria-label={ __( 'Format tools' ) }\n\t\t\t>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<FormatToolbar />\n\t\t\t\t</ToolbarGroup>\n\t\t\t</NavigableToolbar>\n\t\t</Popover>\n\t);\n}\n\nconst FormatToolbarContainer = ( {\n\tinline,\n\teditableContentElement,\n\tvalue,\n} ) => {\n\tconst hasInlineToolbar = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings().hasInlineToolbar,\n\t\t[]\n\t);\n\n\tif ( inline ) {\n\t\treturn <InlineToolbar popoverAnchor={ editableContentElement } />;\n\t}\n\n\tif ( hasInlineToolbar ) {\n\t\tconst activeFormats = getActiveFormats( value );\n\n\t\tif ( isCollapsed( value ) && ! activeFormats.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<InlineSelectionToolbar\n\t\t\t\teditableContentElement={ editableContentElement }\n\t\t\t\tactiveFormats={ activeFormats }\n\t\t\t/>\n\t\t);\n\t}\n\n\t// Render regular toolbar.\n\treturn (\n\t\t<BlockControls group=\"inline\">\n\t\t\t<FormatToolbar />\n\t\t</BlockControls>\n\t);\n};\n\nexport default FormatToolbarContainer;\n"],"mappings":"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"}