{"version":3,"names":["_data","require","_blocks","_useBlockDisplayInformation","_interopRequireDefault","_store","useBlockDisplayTitle","clientId","maximumLength","context","attributes","name","reusableBlockTitle","useSelect","select","getBlockName","getBlockAttributes","__experimentalGetReusableBlockTitle","blockEditorStore","blockName","isReusable","isReusableBlock","getBlockType","ref","blockInformation","useBlockDisplayInformation","blockType","blockLabel","getBlockLabel","label","blockTitle","title","length","omission","slice"],"sources":["@wordpress/block-editor/src/components/block-title/use-block-display-title.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tgetBlockType,\n\t__experimentalGetBlockLabel as getBlockLabel,\n\tisReusableBlock,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Returns the block's configured title as a string, or empty if the title\n * cannot be determined.\n *\n * @example\n *\n * ```js\n * useBlockDisplayTitle( { clientId: 'afd1cb17-2c08-4e7a-91be-007ba7ddc3a1', maximumLength: 17 } );\n * ```\n *\n * @param {Object}           props\n * @param {string}           props.clientId      Client ID of block.\n * @param {number|undefined} props.maximumLength The maximum length that the block title string may be before truncated.\n * @param {string|undefined} props.context       The context to pass to `getBlockLabel`.\n * @return {?string} Block title.\n */\nexport default function useBlockDisplayTitle( {\n\tclientId,\n\tmaximumLength,\n\tcontext,\n} ) {\n\tconst { attributes, name, reusableBlockTitle } = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\t__experimentalGetReusableBlockTitle,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tif ( ! blockName ) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tconst isReusable = isReusableBlock( getBlockType( blockName ) );\n\t\t\treturn {\n\t\t\t\tattributes: getBlockAttributes( clientId ),\n\t\t\t\tname: blockName,\n\t\t\t\treusableBlockTitle:\n\t\t\t\t\tisReusable &&\n\t\t\t\t\t__experimentalGetReusableBlockTitle(\n\t\t\t\t\t\tgetBlockAttributes( clientId ).ref\n\t\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tif ( ! name || ! blockInformation ) {\n\t\treturn null;\n\t}\n\tconst blockType = getBlockType( name );\n\tconst blockLabel = blockType\n\t\t? getBlockLabel( blockType, attributes, context )\n\t\t: null;\n\n\tconst label = reusableBlockTitle || blockLabel;\n\t// Label will fallback to the title if no label is defined for the current\n\t// label context. If the label is defined we prioritize it over a\n\t// possible block variation title match.\n\tconst blockTitle =\n\t\tlabel && label !== blockType.title ? label : blockInformation.title;\n\n\tif (\n\t\tmaximumLength &&\n\t\tmaximumLength > 0 &&\n\t\tblockTitle.length > maximumLength\n\t) {\n\t\tconst omission = '...';\n\t\treturn (\n\t\t\tblockTitle.slice( 0, maximumLength - omission.length ) + omission\n\t\t);\n\t}\n\n\treturn blockTitle;\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AASA,IAAAE,2BAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,MAAA,GAAAJ,OAAA;AAdA;AACA;AACA;;AAQA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASK,oBAAoBA,CAAE;EAC7CC,QAAQ;EACRC,aAAa;EACbC;AACD,CAAC,EAAG;EACH,MAAM;IAAEC,UAAU;IAAEC,IAAI;IAAEC;EAAmB,CAAC,GAAG,IAAAC,eAAS,EACvDC,MAAM,IAAM;IACb,IAAK,CAAEP,QAAQ,EAAG;MACjB,OAAO,CAAC,CAAC;IACV;IACA,MAAM;MACLQ,YAAY;MACZC,kBAAkB;MAClBC;IACD,CAAC,GAAGH,MAAM,CAAEI,YAAiB,CAAC;IAC9B,MAAMC,SAAS,GAAGJ,YAAY,CAAER,QAAS,CAAC;IAC1C,IAAK,CAAEY,SAAS,EAAG;MAClB,OAAO,CAAC,CAAC;IACV;IACA,MAAMC,UAAU,GAAG,IAAAC,uBAAe,EAAE,IAAAC,oBAAY,EAAEH,SAAU,CAAE,CAAC;IAC/D,OAAO;MACNT,UAAU,EAAEM,kBAAkB,CAAET,QAAS,CAAC;MAC1CI,IAAI,EAAEQ,SAAS;MACfP,kBAAkB,EACjBQ,UAAU,IACVH,mCAAmC,CAClCD,kBAAkB,CAAET,QAAS,CAAC,CAACgB,GAChC;IACF,CAAC;EACF,CAAC,EACD,CAAEhB,QAAQ,CACX,CAAC;EAED,MAAMiB,gBAAgB,GAAG,IAAAC,mCAA0B,EAAElB,QAAS,CAAC;EAC/D,IAAK,CAAEI,IAAI,IAAI,CAAEa,gBAAgB,EAAG;IACnC,OAAO,IAAI;EACZ;EACA,MAAME,SAAS,GAAG,IAAAJ,oBAAY,EAAEX,IAAK,CAAC;EACtC,MAAMgB,UAAU,GAAGD,SAAS,GACzB,IAAAE,mCAAa,EAAEF,SAAS,EAAEhB,UAAU,EAAED,OAAQ,CAAC,GAC/C,IAAI;EAEP,MAAMoB,KAAK,GAAGjB,kBAAkB,IAAIe,UAAU;EAC9C;EACA;EACA;EACA,MAAMG,UAAU,GACfD,KAAK,IAAIA,KAAK,KAAKH,SAAS,CAACK,KAAK,GAAGF,KAAK,GAAGL,gBAAgB,CAACO,KAAK;EAEpE,IACCvB,aAAa,IACbA,aAAa,GAAG,CAAC,IACjBsB,UAAU,CAACE,MAAM,GAAGxB,aAAa,EAChC;IACD,MAAMyB,QAAQ,GAAG,KAAK;IACtB,OACCH,UAAU,CAACI,KAAK,CAAE,CAAC,EAAE1B,aAAa,GAAGyB,QAAQ,CAACD,MAAO,CAAC,GAAGC,QAAQ;EAEnE;EAEA,OAAOH,UAAU;AAClB"}