{"version":3,"names":["_data","require","_layout","_store","_layouts","EMPTY_ARRAY","DEFAULT_CONTROLS","WIDE_CONTROLS","useAvailableAlignments","controls","includes","wideControlsEnabled","themeSupportsLayout","isBlockBasedTheme","useSelect","select","getSettings","blockEditorStore","settings","alignWide","supportsLayout","__unstableIsBlockBasedTheme","layout","useLayout","layoutType","getLayoutType","type","layoutAlignments","getAlignments","alignments","filter","name","alignmentName","length","availableAlignments","enabledControls","control","map","enabledControl"],"sources":["@wordpress/block-editor/src/components/block-alignment-control/use-available-alignments.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useLayout } from '../block-list/layout';\nimport { store as blockEditorStore } from '../../store';\nimport { getLayoutType } from '../../layouts';\n\nconst EMPTY_ARRAY = [];\nconst DEFAULT_CONTROLS = [ 'none', 'left', 'center', 'right', 'wide', 'full' ];\nconst WIDE_CONTROLS = [ 'wide', 'full' ];\n\nexport default function useAvailableAlignments( controls = DEFAULT_CONTROLS ) {\n\t// Always add the `none` option if not exists.\n\tif ( ! controls.includes( 'none' ) ) {\n\t\tcontrols = [ 'none', ...controls ];\n\t}\n\tconst {\n\t\twideControlsEnabled = false,\n\t\tthemeSupportsLayout,\n\t\tisBlockBasedTheme,\n\t} = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\tconst settings = getSettings();\n\t\treturn {\n\t\t\twideControlsEnabled: settings.alignWide,\n\t\t\tthemeSupportsLayout: settings.supportsLayout,\n\t\t\tisBlockBasedTheme: settings.__unstableIsBlockBasedTheme,\n\t\t};\n\t}, [] );\n\tconst layout = useLayout();\n\tconst layoutType = getLayoutType( layout?.type );\n\tconst layoutAlignments = layoutType.getAlignments(\n\t\tlayout,\n\t\tisBlockBasedTheme\n\t);\n\n\tif ( themeSupportsLayout ) {\n\t\tconst alignments = layoutAlignments.filter(\n\t\t\t( { name: alignmentName } ) => controls.includes( alignmentName )\n\t\t);\n\t\t// While we treat `none` as an alignment, we shouldn't return it if no\n\t\t// other alignments exist.\n\t\tif ( alignments.length === 1 && alignments[ 0 ].name === 'none' ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\t\treturn alignments;\n\t}\n\n\t// Starting here, it's the fallback for themes not supporting the layout config.\n\tif ( layoutType.name !== 'default' && layoutType.name !== 'constrained' ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\tconst { alignments: availableAlignments = DEFAULT_CONTROLS } = layout;\n\tconst enabledControls = controls\n\t\t.filter(\n\t\t\t( control ) =>\n\t\t\t\t( layout.alignments || // Ignore the global wideAlignment check if the layout explicitely defines alignments.\n\t\t\t\t\twideControlsEnabled ||\n\t\t\t\t\t! WIDE_CONTROLS.includes( control ) ) &&\n\t\t\t\tavailableAlignments.includes( control )\n\t\t)\n\t\t.map( ( enabledControl ) => ( { name: enabledControl } ) );\n\n\t// While we treat `none` as an alignment, we shouldn't return it if no\n\t// other alignments exist.\n\tif (\n\t\tenabledControls.length === 1 &&\n\t\tenabledControls[ 0 ].name === 'none'\n\t) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\treturn enabledControls;\n}\n"],"mappings":";;;;;;AAGA,IAAAA,KAAA,GAAAC,OAAA;AAKA,IAAAC,OAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AAVA;AACA;AACA;;AAGA;AACA;AACA;;AAKA,MAAMI,WAAW,GAAG,EAAE;AACtB,MAAMC,gBAAgB,GAAG,CAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,CAAE;AAC9E,MAAMC,aAAa,GAAG,CAAE,MAAM,EAAE,MAAM,CAAE;AAEzB,SAASC,sBAAsBA,CAAEC,QAAQ,GAAGH,gBAAgB,EAAG;EAC7E;EACA,IAAK,CAAEG,QAAQ,CAACC,QAAQ,CAAE,MAAO,CAAC,EAAG;IACpCD,QAAQ,GAAG,CAAE,MAAM,EAAE,GAAGA,QAAQ,CAAE;EACnC;EACA,MAAM;IACLE,mBAAmB,GAAG,KAAK;IAC3BC,mBAAmB;IACnBC;EACD,CAAC,GAAG,IAAAC,eAAS,EAAIC,MAAM,IAAM;IAC5B,MAAM;MAAEC;IAAY,CAAC,GAAGD,MAAM,CAAEE,YAAiB,CAAC;IAClD,MAAMC,QAAQ,GAAGF,WAAW,CAAC,CAAC;IAC9B,OAAO;MACNL,mBAAmB,EAAEO,QAAQ,CAACC,SAAS;MACvCP,mBAAmB,EAAEM,QAAQ,CAACE,cAAc;MAC5CP,iBAAiB,EAAEK,QAAQ,CAACG;IAC7B,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EACP,MAAMC,MAAM,GAAG,IAAAC,iBAAS,EAAC,CAAC;EAC1B,MAAMC,UAAU,GAAG,IAAAC,sBAAa,EAAEH,MAAM,EAAEI,IAAK,CAAC;EAChD,MAAMC,gBAAgB,GAAGH,UAAU,CAACI,aAAa,CAChDN,MAAM,EACNT,iBACD,CAAC;EAED,IAAKD,mBAAmB,EAAG;IAC1B,MAAMiB,UAAU,GAAGF,gBAAgB,CAACG,MAAM,CACzC,CAAE;MAAEC,IAAI,EAAEC;IAAc,CAAC,KAAMvB,QAAQ,CAACC,QAAQ,CAAEsB,aAAc,CACjE,CAAC;IACD;IACA;IACA,IAAKH,UAAU,CAACI,MAAM,KAAK,CAAC,IAAIJ,UAAU,CAAE,CAAC,CAAE,CAACE,IAAI,KAAK,MAAM,EAAG;MACjE,OAAO1B,WAAW;IACnB;IACA,OAAOwB,UAAU;EAClB;;EAEA;EACA,IAAKL,UAAU,CAACO,IAAI,KAAK,SAAS,IAAIP,UAAU,CAACO,IAAI,KAAK,aAAa,EAAG;IACzE,OAAO1B,WAAW;EACnB;EACA,MAAM;IAAEwB,UAAU,EAAEK,mBAAmB,GAAG5B;EAAiB,CAAC,GAAGgB,MAAM;EACrE,MAAMa,eAAe,GAAG1B,QAAQ,CAC9BqB,MAAM,CACJM,OAAO,IACR,CAAEd,MAAM,CAACO,UAAU;EAAI;EACtBlB,mBAAmB,IACnB,CAAEJ,aAAa,CAACG,QAAQ,CAAE0B,OAAQ,CAAC,KACpCF,mBAAmB,CAACxB,QAAQ,CAAE0B,OAAQ,CACxC,CAAC,CACAC,GAAG,CAAIC,cAAc,KAAQ;IAAEP,IAAI,EAAEO;EAAe,CAAC,CAAG,CAAC;;EAE3D;EACA;EACA,IACCH,eAAe,CAACF,MAAM,KAAK,CAAC,IAC5BE,eAAe,CAAE,CAAC,CAAE,CAACJ,IAAI,KAAK,MAAM,EACnC;IACD,OAAO1B,WAAW;EACnB;EAEA,OAAO8B,eAAe;AACvB"}