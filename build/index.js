(()=>{"use strict";const e=window.React,t=window.wp.blockEditor,n=window.wp.compose,l=window.wp.hooks,r=window.wp.element,o=window.wp.components,i=window.wp.i18n,d=window.wp.primitives,u=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"M12 4.75a7.25 7.25 0 100 14.5 7.25 7.25 0 000-14.5zM3.25 12a8.75 8.75 0 1117.5 0 8.75 8.75 0 01-17.5 0zM12 8.75a1.5 1.5 0 01.167 2.99c-.465.052-.917.44-.917 1.01V14h1.5v-.845A3 3 0 109 10.25h1.5a1.5 1.5 0 011.5-1.5zM11.25 15v1.5h1.5V15h-1.5z"})),c=window.wp.data,s=window.wp.coreData,a=({onChange:t,label:n,selected:l,postType:r})=>{var d;const u=null!==(d=(0,c.useSelect)((e=>e(s.store).getEntityRecords("postType",null!=r?r:"post",{per_page:-1,_fields:["id","title"],context:"edit"})),[r]))&&void 0!==d?d:[],a=u.filter((e=>{var t;return l?.includes(null!==(t=e.id)&&void 0!==t?t:0)})),p=e=>(0,i.sprintf)("%1$s (ID: %2$d)",e.title.rendered,e.id);return(0,e.createElement)(o.FormTokenField,{label:n,value:a.map(p),suggestions:u.map(p),onChange:e=>t(e.map((e=>{if("string"==typeof e){const t=(e=>{const t=e.match(/(.+)\(ID: (\d+)\)/);return!!t&&{id:parseInt(t[2],10),title:t[1].trim()}})(e);if(t&&!isNaN(t.id))return t.id}return!1})).filter((e=>!1!==e))),tokenizeOnBlur:!1})},p=({setAttributes:t,attributes:n})=>{const{query:l}=n,[d,c]=(0,r.useState)(!1);return l?.inherit?null:(0,e.createElement)(o.Panel,null,(0,e.createElement)(o.PanelBody,{title:"Specified Posts"},(0,e.createElement)(a,{label:(0,i.__)("Include","boxuk-query-include-exclude"),selected:l?.include||[],onChange:e=>{if(e.length>0)t({query:{...l,include:e}});else{const{include:e,...n}=l||{};t({query:n})}},postType:l?.postType}),(0,e.createElement)(a,{label:(0,i.__)("Exclude","boxuk-query-include-exclude"),selected:l?.exclude||[],onChange:e=>{t({query:{...l,exclude:e}})},postType:l?.postType}),(0,e.createElement)(o.Button,{onClick:()=>c(!d),icon:u},(0,i.__)("More Info","boxuk-query-include-exclude"),d&&(0,e.createElement)(o.Popover,null,(0,e.createElement)("div",{style:{minWidth:"200px"}},(0,e.createElement)(o.PanelBody,null,(0,i.__)("Marking posts to include will override any other query settings and force only these posts to be displayed. Using the exclude option will remove these posts from the query results but will respect other query settings.","boxuk-query-include-exclude")))))))};(0,l.addFilter)("editor.BlockEdit","boxuk/query-include-exclude",(0,n.createHigherOrderComponent)((n=>l=>"name"in l==0||"core/query"!==l.name?(0,e.createElement)(n,{...l}):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n,{...l}),(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(p,{...l})))),"boxuk-query-include-exclude"))})();