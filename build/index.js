(()=>{"use strict";window.React;const e=window.wp.blockEditor,t=window.wp.compose,n=window.wp.hooks,i=window.wp.element,o=window.wp.components,l=window.wp.i18n,s=window.wp.primitives,r=window.ReactJSXRuntime,d=(0,r.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(s.Path,{d:"M12 4.75a7.25 7.25 0 100 14.5 7.25 7.25 0 000-14.5zM3.25 12a8.75 8.75 0 1117.5 0 8.75 8.75 0 01-17.5 0zM12 8.75a1.5 1.5 0 01.167 2.99c-.465.052-.917.44-.917 1.01V14h1.5v-.845A3 3 0 109 10.25h1.5a1.5 1.5 0 011.5-1.5zM11.25 15v1.5h1.5V15h-1.5z"})}),u=window.wp.data,c=window.wp.coreData,p=({onChange:e,label:t,selected:n,postType:i})=>{var s;const d=null!==(s=(0,u.useSelect)((e=>e(c.store).getEntityRecords("postType",null!=i?i:"post",{per_page:-1,_fields:["id","title"],context:"edit"})),[i]))&&void 0!==s?s:[],p=d.filter((e=>{var t;return n?.includes(null!==(t=e.id)&&void 0!==t?t:0)})),a=e=>(0,l.sprintf)("%1$s (ID: %2$d)",e.title.rendered,e.id);return(0,r.jsx)(o.FormTokenField,{label:t,value:p.map(a),suggestions:d.map(a),onChange:t=>e(t.map((e=>{if("string"==typeof e){const t=(e=>{const t=e.match(/(.+)\(ID: (\d+)\)/);return!!t&&{id:parseInt(t[2],10),title:t[1].trim()}})(e);if(t&&!isNaN(t.id))return t.id}return!1})).filter((e=>!1!==e))),tokenizeOnBlur:!1})},a=({setAttributes:e,attributes:t})=>{const{query:n}=t,[s,u]=(0,i.useState)(!1);return n?.inherit?null:(0,r.jsx)(o.Panel,{children:(0,r.jsxs)(o.PanelBody,{title:"Specified Posts",children:[(0,r.jsx)(p,{label:(0,l.__)("Include","boxuk-query-include-exclude"),selected:n?.include||[],onChange:t=>{if(t.length>0)e({query:{...n,include:t}});else{const{include:t,...i}=n||{};e({query:i})}},postType:n?.postType}),(0,r.jsx)(p,{label:(0,l.__)("Exclude","boxuk-query-include-exclude"),selected:n?.exclude||[],onChange:t=>{e({query:{...n,exclude:t}})},postType:n?.postType}),(0,r.jsxs)(o.Button,{onClick:()=>u(!s),icon:d,children:[(0,l.__)("More Info","boxuk-query-include-exclude"),s&&(0,r.jsx)(o.Popover,{children:(0,r.jsx)("div",{style:{minWidth:"200px"},children:(0,r.jsx)(o.PanelBody,{children:(0,l.__)("Marking posts to include will override any other query settings and force only these posts to be displayed. Using the exclude option will remove these posts from the query results but will respect other query settings.","boxuk-query-include-exclude")})})})]})]})})};(0,n.addFilter)("editor.BlockEdit","boxuk/query-include-exclude",(0,t.createHigherOrderComponent)((t=>n=>"name"in n==0||"core/query"!==n.name?(0,r.jsx)(t,{...n}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t,{...n}),(0,r.jsx)(e.InspectorControls,{children:(0,r.jsx)(a,{...n})})]})),"boxuk-query-include-exclude"))})();